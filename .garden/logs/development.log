
[2021-01-20T00:24:02.371Z] -> Created new project config in project.garden.yml

[2021-01-20T00:24:02.373Z] -> Created default .gardenignore file at .gardenignore. Please edit the .gardenignore file to add files or patterns that Garden should ignore when scanning and building.

[2021-01-25T01:41:34.670Z] Getting status...

[2021-01-25T01:41:35.265Z] Fetching kubectl...

[2021-01-25T01:41:43.769Z] Fetched kubectl

[2021-01-25T01:42:51.856Z] Getting status... → Done

[2021-01-25T01:42:53.557Z]  Processing...

[2021-01-25T01:42:53.855Z] Getting build status for v-c268ce48cc...

[2021-01-25T01:42:53.867Z] Building version v-c268ce48cc...

[2021-01-25T01:42:53.885Z] Getting build status for v-de1512f1d3...

[2021-01-25T01:42:53.920Z] Building version v-de1512f1d3...

[2021-01-25T01:42:53.940Z] Building version v-de1512f1d3... → Done (took 0.1 sec)

[2021-01-25T01:42:53.960Z] Building version v-c268ce48cc... → Done (took 0.1 sec)

[2021-01-25T01:42:53.977Z] Deploying version v-de1512f1d3...

[2021-01-25T01:42:53.989Z] Deploying version v-c268ce48cc...

[2021-01-25T01:42:54.008Z] Deploying version v-de1512f1d3... → Done (took 0 sec)

[2021-01-25T01:42:54.021Z] Deploying version v-c268ce48cc... → Done (took 0 sec)

[2021-01-25T01:42:54.094Z] Getting build status for v-3a4706eb4b...

[2021-01-25T01:42:54.105Z] Building version v-3a4706eb4b...

[2021-01-25T01:42:54.121Z] Building version v-3a4706eb4b... → Done (took 0 sec)

[2021-01-25T01:42:54.137Z] Deploying version v-3a4706eb4b...

[2021-01-25T01:42:54.157Z] Deploying version v-3a4706eb4b... → Done (took 0 sec)

[2021-01-25T01:42:54.183Z] Waiting for code changes...

[2021-01-25T01:44:42.802Z]  Processing...

[2021-01-25T01:44:42.834Z] Waiting for code changes...

[2021-01-25T01:45:18.420Z]  Processing...

[2021-01-25T01:45:18.450Z] Waiting for code changes...

[2021-01-25T01:51:48.893Z] Getting status...

[2021-01-25T01:51:53.746Z] Getting status... → Cached

[2021-01-25T01:51:53.759Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T01:51:54.641Z]  Processing...

[2021-01-25T01:51:54.659Z] Syncing module sources (1 file)...

[2021-01-25T01:51:55.053Z] Getting build status for v-c268ce48cc...

[2021-01-25T01:51:55.068Z] Building version v-c268ce48cc...

[2021-01-25T01:51:55.076Z] Syncing module sources (1 file)... → Done (took 0.4 sec)

[2021-01-25T01:51:55.089Z] Getting build status for v-b3c6c24903...

[2021-01-25T01:51:55.103Z] Building version v-b3c6c24903...

[2021-01-25T01:51:55.120Z] Building version v-c268ce48cc... → Done (took 0.1 sec)

[2021-01-25T01:51:55.127Z] Building version v-b3c6c24903... → Done (took 0 sec)

[2021-01-25T01:51:55.138Z] Deploying version v-c268ce48cc...

[2021-01-25T01:51:55.150Z] Deploying version v-b3c6c24903...

[2021-01-25T01:51:55.171Z] Deploying version v-b3c6c24903... → Done (took 0 sec)

[2021-01-25T01:51:55.187Z] Getting build status for v-3a4706eb4b...

[2021-01-25T01:51:55.195Z] Building version v-3a4706eb4b...

[2021-01-25T01:51:55.212Z] Building version v-3a4706eb4b... → Done (took 0 sec)

[2021-01-25T01:51:55.225Z] Deploying version v-3a4706eb4b...

[2021-01-25T01:51:55.242Z] Deploying version v-c268ce48cc... → Done (took 0.1 sec)

[2021-01-25T01:51:55.253Z] Deploying version v-3a4706eb4b... → Done (took 0 sec)

[2021-01-25T01:51:55.276Z] Waiting for code changes...

[2021-01-25T01:52:09.227Z]  Processing...

[2021-01-25T01:52:09.257Z] Waiting for code changes...

[2021-01-25T01:52:59.789Z] Getting status...

[2021-01-25T01:53:01.442Z] Getting status... → Cached

[2021-01-25T01:53:01.457Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T01:53:09.361Z] Module configuration changed, reloading...

[2021-01-25T01:53:09.827Z] Garden dashboard running at http://localhost:9777

[2021-01-25T01:53:09.845Z] Getting status...

[2021-01-25T01:53:12.081Z] Getting status... → Cached

[2021-01-25T01:53:12.094Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T01:53:19.339Z]  Processing...

[2021-01-25T01:53:19.357Z] Syncing module sources (1 file)...

[2021-01-25T01:53:19.376Z] Syncing module sources (1 file)...

[2021-01-25T01:53:19.674Z] Syncing module sources (1 file)... → Done (took 0.3 sec)

[2021-01-25T01:53:19.688Z] Getting build status for v-d2667389c9...

[2021-01-25T01:53:19.703Z] Building version v-d2667389c9...

[2021-01-25T01:53:19.726Z] Syncing module sources (1 file)... → Done (took 0.4 sec)

[2021-01-25T01:53:19.739Z] Getting build status for v-b3c6c24903...

[2021-01-25T01:53:19.751Z] Building version v-b3c6c24903...

[2021-01-25T01:53:19.772Z] Getting build status for v-3a4706eb4b...

[2021-01-25T01:53:19.784Z] Building version v-3a4706eb4b...

[2021-01-25T01:53:19.798Z] Building version v-d2667389c9... → Done (took 0.1 sec)

[2021-01-25T01:53:19.818Z] Deploying version v-d2667389c9...

[2021-01-25T01:53:19.833Z] Building version v-b3c6c24903... → Done (took 0.1 sec)

[2021-01-25T01:53:19.853Z] Deploying version v-b3c6c24903...

[2021-01-25T01:53:19.865Z] Building version v-3a4706eb4b... → Done (took 0.1 sec)

[2021-01-25T01:53:19.876Z] Deploying version v-3a4706eb4b...

[2021-01-25T01:53:19.903Z] Deploying version v-d2667389c9... → Done (took 0.1 sec)

[2021-01-25T01:53:19.914Z] Deploying version v-b3c6c24903... → Done (took 0.1 sec)

[2021-01-25T01:53:19.933Z] Deploying version v-3a4706eb4b... → Done (took 0 sec)

[2021-01-25T01:53:19.952Z] Waiting for code changes...

[2021-01-25T01:53:28.741Z] Getting status...

[2021-01-25T01:53:30.687Z] Getting status... → Cached

[2021-01-25T01:53:30.705Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T01:53:37.739Z] Missing include and/or exclude directives on modules with overlapping paths.
Setting includes/excludes is required when modules have the same path (i.e. are in the same garden.yml file),
or when one module is nested within another.

Module backend overlaps with module(s) ecom-backend (same path).

Error Details:

overlappingModules: []


[2021-01-25T01:54:07.201Z] Getting status...

[2021-01-25T01:54:08.877Z] Getting status... → Cached

[2021-01-25T01:54:08.903Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T01:54:15.117Z] Module ecom-backend is declared multiple times (in 'ecom-backend/garden.yml' and 'ecom-backend/garden.yml')

Error Details:

pathA: ecom-backend/garden.yml
pathB: ecom-backend/garden.yml


[2021-01-25T01:54:34.329Z] Getting status...

[2021-01-25T01:54:36.116Z] Getting status... → Cached

[2021-01-25T01:54:36.139Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T01:54:43.689Z] Missing include and/or exclude directives on modules with overlapping paths.
Setting includes/excludes is required when modules have the same path (i.e. are in the same garden.yml file),
or when one module is nested within another.

Module ecom-postgres overlaps with module(s) ecom-backend (same path).

Error Details:

overlappingModules: []


[2021-01-25T01:54:46.558Z] Getting status...

[2021-01-25T01:54:48.609Z] Getting status... → Cached

[2021-01-25T01:54:48.638Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T01:54:55.780Z] Failed resolving one or more modules:

ecom-postgres: Error validating Module 'ecom-postgres' (ecom-backend): key "image" is not allowed at path [image]

Error Details:

errors: {}


[2021-01-25T01:55:18.151Z] Getting status...

[2021-01-25T01:55:19.980Z] Getting status... → Cached

[2021-01-25T01:55:19.997Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T01:55:27.302Z] Missing include and/or exclude directives on modules with overlapping paths.
Setting includes/excludes is required when modules have the same path (i.e. are in the same garden.yml file),
or when one module is nested within another.

Module ecom-postgres overlaps with module(s) ecom-backend (same path).

Error Details:

overlappingModules: []


[2021-01-25T01:56:05.010Z] Getting status...

[2021-01-25T01:56:07.018Z] Getting status... → Cached

[2021-01-25T01:56:07.054Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T01:56:13.199Z] Could not parse garden.yml in directory /home/kriley/code/ecom/ecom-backend/garden.yml as valid YAML: name of an alias node must contain at least one character at line 18, column 4:
      *
       ^

[2021-01-25T01:56:36.859Z] Getting status...

[2021-01-25T01:56:39.033Z] Getting status... → Cached

[2021-01-25T01:56:39.049Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T01:56:45.331Z] Could not parse garden.yml in directory /home/kriley/code/ecom/ecom-backend/garden.yml as valid YAML: name of an alias node must contain at least one character at line 18, column 6:
      - *
         ^

[2021-01-25T02:07:48.836Z] Could not parse garden.yml in directory /home/kriley/code/ecom/ecom-backend/garden.yml as valid YAML: name of an alias node must contain at least one character at line 18, column 6:
      - *
         ^

[2021-01-25T02:07:48.849Z] 
See error.log for detailed error message

[2021-01-25T02:08:16.688Z] Getting status...

[2021-01-25T02:08:20.844Z] Getting status... → Cached

[2021-01-25T02:08:20.857Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T02:08:21.679Z]  Processing...

[2021-01-25T02:08:21.691Z] Syncing module sources (1 file)...

[2021-01-25T02:08:21.710Z] Syncing module sources (1 file)...

[2021-01-25T02:08:21.732Z] Syncing module sources (5 files)...

[2021-01-25T02:08:22.096Z] Syncing module sources (5 files)... → Done (took 0.4 sec)

[2021-01-25T02:08:22.107Z] Getting build status for v-89060762d4...

[2021-01-25T02:08:22.126Z] Fetching docker...

[2021-01-25T02:08:22.141Z] Syncing module sources (1 file)... → Done (took 0.4 sec)

[2021-01-25T02:08:22.150Z] Getting build status for v-b3c6c24903...

[2021-01-25T02:08:22.160Z] Building version v-b3c6c24903...

[2021-01-25T02:08:22.168Z] Syncing module sources (1 file)... → Done (took 0.5 sec)

[2021-01-25T02:08:22.181Z] Getting build status for v-d2667389c9...

[2021-01-25T02:08:22.190Z] Building version v-d2667389c9...

[2021-01-25T02:08:22.207Z] Building version v-b3c6c24903... → Done (took 0.1 sec)

[2021-01-25T02:08:22.217Z] Building version v-d2667389c9... → Done (took 0 sec)

[2021-01-25T02:08:22.228Z] Deploying version v-b3c6c24903...

[2021-01-25T02:08:22.235Z] Deploying version v-d2667389c9...

[2021-01-25T02:08:22.263Z] Getting build status for v-3a4706eb4b...

[2021-01-25T02:08:22.275Z] Building version v-3a4706eb4b...

[2021-01-25T02:08:22.298Z] Building version v-3a4706eb4b... → Done (took 0 sec)

[2021-01-25T02:08:22.311Z] Deploying version v-3a4706eb4b...

[2021-01-25T02:08:22.328Z] Deploying version v-d2667389c9... → Done (took 0.1 sec)

[2021-01-25T02:08:22.356Z] Deploying version v-3a4706eb4b... → Done (took 0 sec)

[2021-01-25T02:08:22.373Z] Deploying version v-b3c6c24903... → Done (took 0.1 sec)

[2021-01-25T02:08:35.439Z] Fetched docker

[2021-01-25T02:08:35.515Z] Building version v-89060762d4...

[2021-01-25T02:08:35.681Z] Building postgres:v-89060762d4...

[2021-01-25T02:09:58.317Z] Building postgres:v-89060762d4...

[2021-01-25T02:09:58.357Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t postgres:v-89060762d4 --build-arg GARDEN_MODULE_VERSION=v-89060762d4 /home/kriley/code/ecom/.garden/build/ecom-postgres" failed with code 1:

COPY failed: file not found in build context or excluded by .dockerignore: stat go.sum: file does not exist

Here's the full output:

Sending build context to Docker daemon   7.68kB
Step 1/10 : FROM golang:1.15.2-alpine as build_base
1.15.2-alpine: Pulling from library/golang
df20fa9351a1: Pulling fs layer
ed8968b2872e: Pulling fs layer
a92cc7c5fd73: Pulling fs layer
e871e8e8d7a9: Pulling fs layer
e73272ec9a57: Pulling fs layer
e73272ec9a57: Waiting
a92cc7c5fd73: Verifying Checksum
a92cc7c5fd73: Download complete
ed8968b2872e: Download complete
df20fa9351a1: Verifying Checksum
df20fa9351a1: Download complete
e73272ec9a57: Verifying Checksum
e73272ec9a57: Download complete
df20fa9351a1: Pull complete
ed8968b2872e: Pull complete
a92cc7c5fd73: Pull complete
e871e8e8d7a9: Verifying Checksum
e871e8e8d7a9: Download complete
e871e8e8d7a9: Pull complete
e73272ec9a57: Pull complete
Digest: sha256:4d8abd16b03209b30b48f69a2e10347aacf7ce65d8f9f685e8c3e20a512234d9
Status: Downloaded newer image for golang:1.15.2-alpine
 ---> b3bc898ad092
Step 2/10 : RUN apk add --no-cache git build-base
 ---> Running in c98392da2424
fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz
(1/26) Upgrading musl (1.1.24-r9 -> 1.1.24-r10)
(2/26) Installing libgcc (9.3.0-r2)
(3/26) Installing libstdc++ (9.3.0-r2)
(4/26) Installing binutils (2.34-r1)
(5/26) Installing libmagic (5.38-r0)
(6/26) Installing file (5.38-r0)
(7/26) Installing gmp (6.2.0-r0)
(8/26) Installing isl (0.18-r0)
(9/26) Installing libgomp (9.3.0-r2)
(10/26) Installing libatomic (9.3.0-r2)
(11/26) Installing libgphobos (9.3.0-r2)
(12/26) Installing mpfr4 (4.0.2-r4)
(13/26) Installing mpc1 (1.1.0-r1)
(14/26) Installing gcc (9.3.0-r2)
(15/26) Installing musl-dev (1.1.24-r10)
(16/26) Installing libc-dev (0.7.2-r3)
(17/26) Installing g++ (9.3.0-r2)
(18/26) Installing make (4.3-r0)
(19/26) Installing fortify-headers (1.1-r0)
(20/26) Installing patch (2.7.6-r6)
(21/26) Installing build-base (0.5-r2)
(22/26) Installing nghttp2-libs (1.41.0-r0)
(23/26) Installing libcurl (7.69.1-r3)
(24/26) Installing expat (2.2.9-r1)
(25/26) Installing pcre2 (10.35-r0)
(26/26) Installing git (2.26.2-r0)
Executing busybox-1.31.1-r16.trigger
OK: 222 MiB in 40 packages
Removing intermediate container c98392da2424
 ---> adb2753c109e
Step 3/10 : WORKDIR /go/src/app/
 ---> Running in 3787ed302cc1
Removing intermediate container 3787ed302cc1
 ---> eeab7eff4b02
Step 4/10 : COPY go.mod .
 ---> b930cb4cb9be
Step 5/10 : COPY go.sum .
COPY failed: file not found in build context or excluded by .dockerignore: stat go.sum: file does not exist

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-postgres


[2021-01-25T02:09:58.402Z] Waiting for code changes...

[2021-01-25T02:13:36.006Z]  Processing...

[2021-01-25T02:13:36.026Z] Syncing module sources (1 file)...

[2021-01-25T02:13:36.059Z] Syncing module sources (5 files)...

[2021-01-25T02:13:36.188Z] Syncing module sources (5 files)... → Done (took 0.1 sec)

[2021-01-25T02:13:36.211Z] Building version v-9bc17cfc7e...

[2021-01-25T02:13:36.235Z] Syncing module sources (1 file)... → Done (took 0.2 sec)

[2021-01-25T02:13:36.252Z] Building version v-85e2663b39...

[2021-01-25T02:13:36.351Z] Building version v-85e2663b39... → Done (took 0.1 sec)

[2021-01-25T02:13:36.372Z] Deploying version v-85e2663b39...

[2021-01-25T02:13:36.394Z] Building postgres:v-9bc17cfc7e...

[2021-01-25T02:13:36.453Z] Deploying version v-85e2663b39... → Done (took 0.1 sec)

[2021-01-25T02:13:36.541Z] Building postgres:v-9bc17cfc7e...

[2021-01-25T02:13:36.561Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t postgres:v-9bc17cfc7e --build-arg GARDEN_MODULE_VERSION=v-9bc17cfc7e /home/kriley/code/ecom/.garden/build/ecom-postgres" failed with code 1:

COPY failed: file not found in build context or excluded by .dockerignore: stat go.sum: file does not exist

Here's the full output:

Sending build context to Docker daemon  8.192kB
Step 1/18 : FROM golang:1.15.2-alpine as build_base
 ---> b3bc898ad092
Step 2/18 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> adb2753c109e
Step 3/18 : WORKDIR /go/src/app/
 ---> Using cache
 ---> eeab7eff4b02
Step 4/18 : COPY go.mod .
 ---> Using cache
 ---> b930cb4cb9be
Step 5/18 : COPY go.sum .
COPY failed: file not found in build context or excluded by .dockerignore: stat go.sum: file does not exist

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-postgres


[2021-01-25T02:13:36.577Z] Waiting for code changes...

[2021-01-25T03:14:02.954Z] Getting status...

[2021-01-25T03:14:06.970Z] Getting status... → Done

[2021-01-25T03:14:07.768Z]  Processing...

[2021-01-25T03:14:07.778Z] Syncing module sources (1 file)...

[2021-01-25T03:14:07.800Z] Syncing module sources (1 file)...

[2021-01-25T03:14:07.817Z] Syncing module sources (5 files)...

[2021-01-25T03:14:08.046Z] Syncing module sources (5 files)... → Done (took 0.2 sec)

[2021-01-25T03:14:08.054Z] Getting build status for v-9bc17cfc7e...

[2021-01-25T03:14:08.067Z] Syncing module sources (1 file)... → Done (took 0.3 sec)

[2021-01-25T03:14:08.079Z] Getting build status for v-85e2663b39...

[2021-01-25T03:14:08.089Z] Building version v-85e2663b39...

[2021-01-25T03:14:08.106Z] Syncing module sources (1 file)... → Done (took 0.3 sec)

[2021-01-25T03:14:08.118Z] Getting build status for v-d022c53cca...

[2021-01-25T03:14:08.127Z] Building version v-d022c53cca...

[2021-01-25T03:14:08.192Z] Getting build status for v-3a4706eb4b...

[2021-01-25T03:14:08.202Z] Building version v-3a4706eb4b...

[2021-01-25T03:14:08.214Z] Building version v-85e2663b39... → Done (took 0.1 sec)

[2021-01-25T03:14:08.226Z] Deploying version v-85e2663b39...

[2021-01-25T03:14:08.248Z] Building version v-d022c53cca... → Done (took 0.1 sec)

[2021-01-25T03:14:08.261Z] Deploying version v-d022c53cca...

[2021-01-25T03:14:08.275Z] Building version v-9bc17cfc7e...

[2021-01-25T03:14:08.287Z] Building version v-3a4706eb4b... → Done (took 0.1 sec)

[2021-01-25T03:14:08.297Z] Deploying version v-3a4706eb4b...

[2021-01-25T03:14:08.403Z] Deploying version v-85e2663b39... → Done (took 0.2 sec)

[2021-01-25T03:14:08.419Z] Deploying version v-d022c53cca... → Done (took 0.2 sec)

[2021-01-25T03:14:08.431Z] Deploying version v-3a4706eb4b... → Done (took 0.1 sec)

[2021-01-25T03:14:08.447Z] Building postgres:v-9bc17cfc7e...

[2021-01-25T03:14:08.578Z] Building postgres:v-9bc17cfc7e...

[2021-01-25T03:14:08.593Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t postgres:v-9bc17cfc7e --build-arg GARDEN_MODULE_VERSION=v-9bc17cfc7e /home/kriley/code/ecom/.garden/build/ecom-postgres" failed with code 1:

COPY failed: file not found in build context or excluded by .dockerignore: stat go.sum: file does not exist

Here's the full output:

Sending build context to Docker daemon  8.192kB
Step 1/18 : FROM golang:1.15.2-alpine as build_base
 ---> b3bc898ad092
Step 2/18 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> adb2753c109e
Step 3/18 : WORKDIR /go/src/app/
 ---> Using cache
 ---> eeab7eff4b02
Step 4/18 : COPY go.mod .
 ---> Using cache
 ---> b930cb4cb9be
Step 5/18 : COPY go.sum .
COPY failed: file not found in build context or excluded by .dockerignore: stat go.sum: file does not exist

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-postgres


[2021-01-25T03:14:08.629Z] Waiting for code changes...

[2021-01-25T21:28:42.864Z] Getting status...

[2021-01-25T21:28:46.600Z] Command "minikube ip" failed with code 89:

Here's the full output:

* The control plane node must be running for this command
  - To start a cluster, run: "minikube start"

Error Details:

shortMessage: 'Command failed with exit code 89: minikube ip'
command: minikube ip
exitCode: 89
stdout: |-
  * The control plane node must be running for this command
    - To start a cluster, run: "minikube start"
stderr: ''
all: |-
  * The control plane node must be running for this command
    - To start a cluster, run: "minikube start"
failed: true
timedOut: false
isCanceled: false
killed: false


[2021-01-25T21:28:46.645Z] Failed resolving one or more providers:
- local-kubernetes

Error Details:

rawConfigs: []
taskResults:
  resolve-provider.exec:
    type: resolve-provider
    key: resolve-provider.exec
    name: exec
    description: resolving provider exec
    completedAt: 2021-01-25T21:28:43.560Z
    batchId: ccb5732d-4add-42a8-be66-be5f522f088b
    output:
      name: exec
      dependencies: {}
      moduleConfigs: []
      config:
        name: exec
        dependencies: []
        path: /home/kriley/code/ecom
      status:
        ready: true
        outputs: {}
      dashboardPages: []
    dependencyResults: {}
    version: 0.12.12
    startedAt: 2021-01-25T21:28:43.542Z
  resolve-provider.container:
    type: resolve-provider
    key: resolve-provider.container
    name: container
    description: resolving provider container
    completedAt: 2021-01-25T21:28:43.561Z
    batchId: aaf079d5-5b9d-4f87-8c94-8c28ff698c09
    output:
      name: container
      dependencies: {}
      moduleConfigs: []
      config:
        name: container
        dependencies: []
        path: /home/kriley/code/ecom
      status:
        ready: true
        outputs: {}
      dashboardPages: []
    dependencyResults: {}
    version: 0.12.12
    startedAt: 2021-01-25T21:28:43.544Z
  resolve-provider.local-kubernetes:
    type: resolve-provider
    description: resolving provider local-kubernetes
    key: resolve-provider.local-kubernetes
    name: local-kubernetes
    startedAt: 2021-01-25T21:28:43.562Z
    completedAt: 2021-01-25T21:28:46.550Z
    batchId: aaf079d5-5b9d-4f87-8c94-8c28ff698c09
    version: 0.12.12
  resolve-provider.templated:
    type: resolve-provider
    key: resolve-provider.templated
    name: templated
    description: resolving provider templated
    completedAt: 2021-01-25T21:28:43.561Z
    batchId: 730cc580-ab2d-4860-94c9-94acbef9fbf4
    output:
      name: templated
      dependencies: {}
      moduleConfigs: []
      config:
        name: templated
        path: /home/kriley/code/ecom
      status:
        ready: true
        outputs: {}
      dashboardPages: []
    dependencyResults: {}
    version: 0.12.12
    startedAt: 2021-01-25T21:28:43.545Z
messages: []


[2021-01-25T21:28:46.670Z] 
See error.log for detailed error message

[2021-01-25T21:28:46.794Z] Getting status...

[2021-01-25T21:31:20.631Z] Getting status...

[2021-01-25T21:31:24.098Z] Getting status... → Cached

[2021-01-25T21:31:24.113Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:31:25.350Z]  Processing...

[2021-01-25T21:31:25.380Z] Syncing module sources (1 file)...

[2021-01-25T21:31:25.411Z] Syncing module sources (5 files)...

[2021-01-25T21:31:25.428Z] Syncing module sources (9 files)...

[2021-01-25T21:31:25.741Z] Getting build status for v-6ba4c6871b...

[2021-01-25T21:31:25.766Z] Building version v-6ba4c6871b...

[2021-01-25T21:31:25.786Z] Syncing module sources (1 file)... → Done (took 0.4 sec)

[2021-01-25T21:31:25.805Z] Getting build status for v-85e2663b39...

[2021-01-25T21:31:25.832Z] Building version v-85e2663b39...

[2021-01-25T21:31:25.846Z] Syncing module sources (5 files)... → Done (took 0.4 sec)

[2021-01-25T21:31:25.862Z] Getting build status for v-9bc17cfc7e...

[2021-01-25T21:31:25.889Z] Syncing module sources (9 files)... → Done (took 0.5 sec)

[2021-01-25T21:31:25.912Z] Getting build status for v-8ce937de16...

[2021-01-25T21:31:25.943Z] Building version v-6ba4c6871b... → Done (took 0.2 sec)

[2021-01-25T21:31:26.043Z] Building version v-85e2663b39... → Done (took 0.2 sec)

[2021-01-25T21:31:26.072Z] Deploying version v-85e2663b39...

[2021-01-25T21:31:26.147Z] Getting build status for v-3a4706eb4b...

[2021-01-25T21:31:26.168Z] Building version v-3a4706eb4b...

[2021-01-25T21:31:26.205Z] Deploying version v-6ba4c6871b...

[2021-01-25T21:31:26.240Z] Building version v-3a4706eb4b... → Done (took 0.1 sec)

[2021-01-25T21:31:26.280Z] Deploying version v-3a4706eb4b...

[2021-01-25T21:31:26.300Z] Deploying version v-85e2663b39... → Done (took 0.2 sec)

[2021-01-25T21:31:26.394Z] Deploying version v-3a4706eb4b... → Done (took 0.1 sec)

[2021-01-25T21:31:30.400Z] Building version v-8ce937de16...

[2021-01-25T21:31:30.421Z] Building version v-9bc17cfc7e...

[2021-01-25T21:31:30.688Z] Building ecom-api:v-8ce937de16...

[2021-01-25T21:31:30.767Z] Building postgres:v-9bc17cfc7e...

[2021-01-25T21:31:33.143Z] Building postgres:v-9bc17cfc7e...

[2021-01-25T21:31:33.194Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t postgres:v-9bc17cfc7e --build-arg GARDEN_MODULE_VERSION=v-9bc17cfc7e /home/kriley/code/ecom/.garden/build/ecom-postgres" failed with code 1:

COPY failed: file not found in build context or excluded by .dockerignore: stat go.sum: file does not exist

Here's the full output:

Sending build context to Docker daemon  8.192kB
Step 1/18 : FROM golang:1.15.2-alpine as build_base
 ---> b3bc898ad092
Step 2/18 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> adb2753c109e
Step 3/18 : WORKDIR /go/src/app/
 ---> Using cache
 ---> eeab7eff4b02
Step 4/18 : COPY go.mod .
 ---> Using cache
 ---> b930cb4cb9be
Step 5/18 : COPY go.sum .
COPY failed: file not found in build context or excluded by .dockerignore: stat go.sum: file does not exist

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-postgres


[2021-01-25T21:31:34.061Z] Waiting for resources to be ready...

[2021-01-25T21:31:36.167Z] Deployment/postgresdb: Pulling image "postgres:12-alpine"

[2021-01-25T21:32:17.423Z] Deployment/postgresdb: Started container postgresdb

[2021-01-25T21:32:24.534Z] Resources ready

[2021-01-25T21:32:24.618Z] Deploying version v-6ba4c6871b...

[2021-01-25T21:32:24.662Z] Error validating deployService kubernetes output from provider local-kubernetes: key .forwardablePorts[0][name] with value "5432" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/

Error Details:

value:
  forwardablePorts: []
  state: ready
  version: v-6ba4c6871b
  detail:
    remoteResources: []
context: deployService kubernetes output from provider local-kubernetes
errorDescription: "key \e[4m.forwardablePorts[0][name]\e[24m with value \"5432\" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/"
errorDetails: []


[2021-01-25T21:32:24.765Z] Error validating getServiceStatus kubernetes output from provider local-kubernetes: key .forwardablePorts[0][name] with value "5432" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/

Error Details:

value:
  forwardablePorts: []
  state: ready
  version: v-6ba4c6871b
  detail:
    remoteResources: []
context: getServiceStatus kubernetes output from provider local-kubernetes
errorDescription: "key \e[4m.forwardablePorts[0][name]\e[24m with value \"5432\" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/"
errorDetails: []


[2021-01-25T21:33:44.004Z] Getting status...

[2021-01-25T21:33:46.929Z] Getting status... → Cached

[2021-01-25T21:33:46.957Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:33:48.158Z]  Processing...

[2021-01-25T21:33:48.185Z] Syncing module sources (1 file)...

[2021-01-25T21:33:48.214Z] Syncing module sources (5 files)...

[2021-01-25T21:33:48.228Z] Syncing module sources (9 files)...

[2021-01-25T21:33:48.713Z] Syncing module sources (5 files)... → Done (took 0.5 sec)

[2021-01-25T21:33:48.733Z] Getting build status for v-7370508a53...

[2021-01-25T21:33:48.762Z] Syncing module sources (1 file)... → Done (took 0.6 sec)

[2021-01-25T21:33:48.779Z] Getting build status for v-e00837550c...

[2021-01-25T21:33:48.803Z] Building version v-e00837550c...

[2021-01-25T21:33:48.826Z] Syncing module sources (9 files)... → Done (took 0.6 sec)

[2021-01-25T21:33:48.846Z] Getting build status for v-8ce937de16...

[2021-01-25T21:33:48.863Z] Getting build status for v-4d53617a79...

[2021-01-25T21:33:48.887Z] Building version v-4d53617a79...

[2021-01-25T21:33:49.023Z] Getting build status for v-3a4706eb4b...

[2021-01-25T21:33:49.041Z] Building version v-3a4706eb4b...

[2021-01-25T21:33:49.078Z] Building version v-e00837550c... → Done (took 0.3 sec)

[2021-01-25T21:33:49.101Z] Building version v-4d53617a79... → Done (took 0.2 sec)

[2021-01-25T21:33:49.124Z] Deploying version v-e00837550c...

[2021-01-25T21:33:49.166Z] Building version v-7370508a53...

[2021-01-25T21:33:49.183Z] Building version v-3a4706eb4b... → Done (took 0.2 sec)

[2021-01-25T21:33:49.198Z] Deploying version v-3a4706eb4b...

[2021-01-25T21:33:49.224Z] Building version v-8ce937de16...

[2021-01-25T21:33:49.486Z] Building postgres:v-7370508a53...

[2021-01-25T21:33:49.515Z] Deploying version v-3a4706eb4b... → Done (took 0.3 sec)

[2021-01-25T21:33:49.589Z] Deploying version v-e00837550c... → Done (took 0.5 sec)

[2021-01-25T21:33:49.612Z] Building ecom-api:v-8ce937de16...

[2021-01-25T21:33:49.751Z] Error validating getServiceStatus kubernetes output from provider local-kubernetes: key .forwardablePorts[0][name] with value "5432" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/

Error Details:

value:
  forwardablePorts: []
  state: ready
  version: v-4d53617a79
  detail:
    remoteResources: []
context: getServiceStatus kubernetes output from provider local-kubernetes
errorDescription: "key \e[4m.forwardablePorts[0][name]\e[24m with value \"5432\" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/"
errorDetails: []


[2021-01-25T21:33:49.812Z] Building postgres:v-7370508a53...

[2021-01-25T21:33:49.852Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t postgres:v-7370508a53 --build-arg GARDEN_MODULE_VERSION=v-7370508a53 /home/kriley/code/ecom/.garden/build/ecom-postgres" failed with code 1:

COPY failed: file not found in build context or excluded by .dockerignore: stat common-lib-image: file does not exist

Here's the full output:

Sending build context to Docker daemon  8.192kB
Step 1/17 : FROM golang:1.15.2-alpine as build_base
 ---> b3bc898ad092
Step 2/17 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> adb2753c109e
Step 3/17 : WORKDIR /go/src/app/
 ---> Using cache
 ---> eeab7eff4b02
Step 4/17 : COPY go.mod .
 ---> Using cache
 ---> b930cb4cb9be
Step 5/17 : COPY common-lib-image ../common-lib
COPY failed: file not found in build context or excluded by .dockerignore: stat common-lib-image: file does not exist

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-postgres


[2021-01-25T21:34:57.293Z] Building ecom-api:v-8ce937de16... → Done (took 68.4 sec)

[2021-01-25T21:34:57.368Z] Waiting for code changes...

[2021-01-25T21:35:42.330Z]  Processing...

[2021-01-25T21:35:42.360Z] Syncing module sources (1 file)...

[2021-01-25T21:35:42.406Z] Syncing module sources (5 files)...

[2021-01-25T21:35:42.541Z] Syncing module sources (1 file)... → Done (took 0.2 sec)

[2021-01-25T21:35:42.569Z] Building version v-45783cad98...

[2021-01-25T21:35:42.600Z] Syncing module sources (5 files)... → Done (took 0.2 sec)

[2021-01-25T21:35:42.632Z] Building version v-0ba88f7c33...

[2021-01-25T21:35:42.663Z] Building version v-45783cad98... → Done (took 0.1 sec)

[2021-01-25T21:35:42.689Z] Deploying version v-45783cad98...

[2021-01-25T21:35:42.819Z] Deploying version v-45783cad98... → Done (took 0.1 sec)

[2021-01-25T21:35:42.888Z] Building postgres:v-0ba88f7c33...

[2021-01-25T21:35:55.587Z] Error validating getServiceStatus kubernetes output from provider local-kubernetes: key .forwardablePorts[0][name] with value "5432" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/

Error Details:

value:
  forwardablePorts: []
  state: ready
  version: v-4d53617a79
  detail:
    remoteResources: []
context: getServiceStatus kubernetes output from provider local-kubernetes
errorDescription: "key \e[4m.forwardablePorts[0][name]\e[24m with value \"5432\" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/"
errorDetails: []


[2021-01-25T21:36:24.310Z] Getting status...

[2021-01-25T21:36:27.269Z] Getting status... → Cached

[2021-01-25T21:36:27.293Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:36:28.572Z]  Processing...

[2021-01-25T21:36:28.600Z] Syncing module sources (1 file)...

[2021-01-25T21:36:28.629Z] Syncing module sources (5 files)...

[2021-01-25T21:36:28.641Z] Syncing module sources (9 files)...

[2021-01-25T21:36:29.167Z] Syncing module sources (5 files)... → Done (took 0.5 sec)

[2021-01-25T21:36:29.190Z] Getting build status for v-0ba88f7c33...

[2021-01-25T21:36:29.207Z] Syncing module sources (9 files)... → Done (took 0.6 sec)

[2021-01-25T21:36:29.225Z] Getting build status for v-8ce937de16...

[2021-01-25T21:36:29.258Z] Getting build status for v-4d53617a79...

[2021-01-25T21:36:29.275Z] Building version v-4d53617a79...

[2021-01-25T21:36:29.292Z] Syncing module sources (1 file)... → Done (took 0.7 sec)

[2021-01-25T21:36:29.306Z] Getting build status for v-45783cad98...

[2021-01-25T21:36:29.322Z] Building version v-45783cad98...

[2021-01-25T21:36:29.481Z] Getting build status for v-3a4706eb4b...

[2021-01-25T21:36:29.500Z] Building version v-3a4706eb4b...

[2021-01-25T21:36:29.538Z] Building version v-4d53617a79... → Done (took 0.3 sec)

[2021-01-25T21:36:29.555Z] Building version v-45783cad98... → Done (took 0.2 sec)

[2021-01-25T21:36:29.574Z] Deploying version v-45783cad98...

[2021-01-25T21:36:29.613Z] Building version v-0ba88f7c33...

[2021-01-25T21:36:29.624Z] Getting build status for v-8ce937de16... → Done (took 0.4 sec)

[2021-01-25T21:36:29.647Z] Building version v-3a4706eb4b... → Done (took 0.2 sec)

[2021-01-25T21:36:29.663Z] Deploying version v-3a4706eb4b...

[2021-01-25T21:36:29.821Z] Deploying version v-3a4706eb4b... → Done (took 0.2 sec)

[2021-01-25T21:36:29.852Z] Deploying version v-45783cad98... → Done (took 0.3 sec)

[2021-01-25T21:36:29.872Z] Building postgres:v-0ba88f7c33...

[2021-01-25T21:36:29.988Z] Error validating getServiceStatus kubernetes output from provider local-kubernetes: key .forwardablePorts[0][name] with value "5432" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/

Error Details:

value:
  forwardablePorts: []
  state: ready
  version: v-4d53617a79
  detail:
    remoteResources: []
context: getServiceStatus kubernetes output from provider local-kubernetes
errorDescription: "key \e[4m.forwardablePorts[0][name]\e[24m with value \"5432\" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/"
errorDetails: []


[2021-01-25T21:36:56.287Z] Getting status...

[2021-01-25T21:36:58.942Z] Getting status... → Cached

[2021-01-25T21:36:58.953Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:37:00.370Z]  Processing...

[2021-01-25T21:37:00.399Z] Syncing module sources (1 file)...

[2021-01-25T21:37:00.430Z] Syncing module sources (5 files)...

[2021-01-25T21:37:00.448Z] Syncing module sources (9 files)...

[2021-01-25T21:37:00.880Z] Syncing module sources (5 files)... → Done (took 0.4 sec)

[2021-01-25T21:37:00.901Z] Getting build status for v-0ba88f7c33...

[2021-01-25T21:37:00.944Z] Syncing module sources (1 file)... → Done (took 0.5 sec)

[2021-01-25T21:37:00.962Z] Getting build status for v-45783cad98...

[2021-01-25T21:37:00.978Z] Building version v-45783cad98...

[2021-01-25T21:37:00.998Z] Syncing module sources (9 files)... → Done (took 0.5 sec)

[2021-01-25T21:37:01.015Z] Getting build status for v-8ce937de16...

[2021-01-25T21:37:01.033Z] Getting build status for v-eac998811c...

[2021-01-25T21:37:01.048Z] Building version v-eac998811c...

[2021-01-25T21:37:01.190Z] Getting build status for v-3a4706eb4b...

[2021-01-25T21:37:01.214Z] Building version v-3a4706eb4b...

[2021-01-25T21:37:01.247Z] Building version v-45783cad98... → Done (took 0.3 sec)

[2021-01-25T21:37:01.269Z] Building version v-eac998811c... → Done (took 0.2 sec)

[2021-01-25T21:37:01.291Z] Deploying version v-45783cad98...

[2021-01-25T21:37:01.327Z] Building version v-0ba88f7c33...

[2021-01-25T21:37:01.339Z] Getting build status for v-8ce937de16... → Done (took 0.3 sec)

[2021-01-25T21:37:01.360Z] Building version v-3a4706eb4b... → Done (took 0.2 sec)

[2021-01-25T21:37:01.374Z] Deploying version v-3a4706eb4b...

[2021-01-25T21:37:01.493Z] Deploying version v-3a4706eb4b... → Done (took 0.1 sec)

[2021-01-25T21:37:01.518Z] Deploying version v-45783cad98... → Done (took 0.2 sec)

[2021-01-25T21:37:01.565Z] Building postgres:v-0ba88f7c33...

[2021-01-25T21:37:01.657Z] Error validating getServiceStatus kubernetes output from provider local-kubernetes: key .forwardablePorts[0][name] with value "5432" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/

Error Details:

value:
  forwardablePorts: []
  state: outdated
  detail:
    remoteResources: []
context: getServiceStatus kubernetes output from provider local-kubernetes
errorDescription: "key \e[4m.forwardablePorts[0][name]\e[24m with value \"5432\" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/"
errorDetails: []


[2021-01-25T21:37:04.113Z] Building postgres:v-0ba88f7c33...

[2021-01-25T21:37:04.158Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t postgres:v-0ba88f7c33 --build-arg GARDEN_MODULE_VERSION=v-0ba88f7c33 /home/kriley/code/ecom/.garden/build/ecom-postgres" failed with code 1:

The command '/bin/sh -c chown enkey_user:enkey_group /app/identity-api' returned a non-zero code: 1

Here's the full output:

Sending build context to Docker daemon  8.192kB
Step 1/16 : FROM golang:1.15.2-alpine as build_base
 ---> b3bc898ad092
Step 2/16 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> adb2753c109e
Step 3/16 : WORKDIR /go/src/app/
 ---> Using cache
 ---> eeab7eff4b02
Step 4/16 : COPY go.mod .
 ---> Using cache
 ---> b930cb4cb9be
Step 5/16 : RUN go mod download
 ---> Using cache
 ---> 7a2427c052e9
Step 6/16 : COPY . .
 ---> Using cache
 ---> 4d0076bf1ba3
Step 7/16 : RUN go build -o ./out/ecom-backend .
 ---> Using cache
 ---> a0c1c79149de
Step 8/16 : FROM alpine:3.12
 ---> 389fef711851
Step 9/16 : RUN apk add ca-certificates postgresql-client
 ---> Using cache
 ---> 35bd72a9f764
Step 10/16 : RUN addgroup -g 1000 ecom_group
 ---> Using cache
 ---> 6aac3f991f40
Step 11/16 : RUN adduser -D -s /bin/sh -u 1000 -G ecom_group ecom_admin
 ---> Using cache
 ---> 65ef9f9caa44
Step 12/16 : COPY --from=build_base /go/src/app/out/ecom-backend /app/ecom-backend
 ---> Using cache
 ---> 83b5f306d3e9
Step 13/16 : EXPOSE 8080
 ---> Using cache
 ---> f3c13ac4c9e0
Step 14/16 : RUN chown enkey_user:enkey_group /app/identity-api
 ---> Running in a443e0d6f5a4
chown: unknown user/group enkey_user:enkey_group
The command '/bin/sh -c chown enkey_user:enkey_group /app/identity-api' returned a non-zero code: 1

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-postgres


[2021-01-25T21:37:04.206Z] Waiting for code changes...

[2021-01-25T21:39:17.413Z]  Processing...

[2021-01-25T21:39:17.440Z] Syncing module sources (1 file)...

[2021-01-25T21:39:17.487Z] Syncing module sources (5 files)...

[2021-01-25T21:39:17.604Z] Syncing module sources (1 file)... → Done (took 0.2 sec)

[2021-01-25T21:39:17.626Z] Building version v-82b8517bfe...

[2021-01-25T21:39:17.652Z] Syncing module sources (5 files)... → Done (took 0.2 sec)

[2021-01-25T21:39:17.680Z] Building version v-1af6d5b675...

[2021-01-25T21:39:17.703Z] Building version v-82b8517bfe... → Done (took 0.1 sec)

[2021-01-25T21:39:17.731Z] Deploying version v-82b8517bfe...

[2021-01-25T21:39:17.838Z] Deploying version v-82b8517bfe... → Done (took 0.1 sec)

[2021-01-25T21:39:17.893Z] Building postgres:v-1af6d5b675...

[2021-01-25T21:39:25.173Z] Building postgres:v-1af6d5b675...

[2021-01-25T21:39:25.203Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t postgres:v-1af6d5b675 --build-arg GARDEN_MODULE_VERSION=v-1af6d5b675 /home/kriley/code/ecom/.garden/build/ecom-postgres" failed with code 1:

The command '/bin/sh -c chown enkey_user:ecom_group /app/ecom-backend' returned a non-zero code: 1

Here's the full output:

Sending build context to Docker daemon  8.192kB
Step 1/16 : FROM golang:1.15.2-alpine as build_base
 ---> b3bc898ad092
Step 2/16 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> adb2753c109e
Step 3/16 : WORKDIR /go/src/app/
 ---> Using cache
 ---> eeab7eff4b02
Step 4/16 : COPY go.mod .
 ---> Using cache
 ---> b930cb4cb9be
Step 5/16 : RUN go mod download
 ---> Using cache
 ---> 7a2427c052e9
Step 6/16 : COPY . .
 ---> 99fb1d76bf79
Step 7/16 : RUN go build -o ./out/ecom-backend .
 ---> Running in 2e43e7718de0
Removing intermediate container 2e43e7718de0
 ---> f68cde09fe41
Step 8/16 : FROM alpine:3.12
 ---> 389fef711851
Step 9/16 : RUN apk add ca-certificates postgresql-client
 ---> Using cache
 ---> 35bd72a9f764
Step 10/16 : RUN addgroup -g 1000 ecom_group
 ---> Using cache
 ---> 6aac3f991f40
Step 11/16 : RUN adduser -D -s /bin/sh -u 1000 -G ecom_group ecom_admin
 ---> Using cache
 ---> 65ef9f9caa44
Step 12/16 : COPY --from=build_base /go/src/app/out/ecom-backend /app/ecom-backend
 ---> Using cache
 ---> 83b5f306d3e9
Step 13/16 : EXPOSE 8080
 ---> Using cache
 ---> f3c13ac4c9e0
Step 14/16 : RUN chown enkey_user:ecom_group /app/ecom-backend
 ---> Running in 57ca34baf7b2
chown: unknown user/group enkey_user:ecom_group
The command '/bin/sh -c chown enkey_user:ecom_group /app/ecom-backend' returned a non-zero code: 1

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-postgres


[2021-01-25T21:39:25.231Z] Waiting for code changes...

[2021-01-25T21:39:48.023Z]  Processing...

[2021-01-25T21:39:48.061Z] Syncing module sources (1 file)...

[2021-01-25T21:39:48.116Z] Syncing module sources (5 files)...

[2021-01-25T21:39:48.295Z] Syncing module sources (5 files)... → Done (took 0.2 sec)

[2021-01-25T21:39:48.328Z] Building version v-10459a9db8...

[2021-01-25T21:39:48.359Z] Syncing module sources (1 file)... → Done (took 0.3 sec)

[2021-01-25T21:39:48.386Z] Building version v-c681d2b0e0...

[2021-01-25T21:39:48.512Z] Building version v-c681d2b0e0... → Done (took 0.1 sec)

[2021-01-25T21:39:48.549Z] Deploying version v-c681d2b0e0...

[2021-01-25T21:39:48.587Z] Building postgres:v-10459a9db8...

[2021-01-25T21:39:48.670Z] Deploying version v-c681d2b0e0... → Done (took 0.1 sec)

[2021-01-25T21:39:58.270Z] Building postgres:v-10459a9db8... → Done (took 9.9 sec)

[2021-01-25T21:39:58.298Z] Waiting for code changes...

[2021-01-25T21:40:04.075Z]  Processing...

[2021-01-25T21:40:04.215Z] Error validating getServiceStatus kubernetes output from provider local-kubernetes: key .forwardablePorts[0][name] with value "5432" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/

Error Details:

value:
  forwardablePorts: []
  state: outdated
  detail:
    remoteResources: []
context: getServiceStatus kubernetes output from provider local-kubernetes
errorDescription: "key \e[4m.forwardablePorts[0][name]\e[24m with value \"5432\" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/"
errorDetails: []


[2021-01-25T21:40:04.248Z] Waiting for code changes...

[2021-01-25T21:41:27.363Z] Getting status...

[2021-01-25T21:41:32.188Z] Getting status... → Cached

[2021-01-25T21:41:32.218Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:41:49.452Z] Module configuration changed, reloading...

[2021-01-25T21:41:50.245Z] Garden dashboard running at http://localhost:9777

[2021-01-25T21:41:50.282Z] Getting status...

[2021-01-25T21:41:50.384Z] Error validating getServiceStatus kubernetes output from provider local-kubernetes: key .forwardablePorts[0][name] with value "5432" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/

Error Details:

value:
  forwardablePorts: []
  state: outdated
  detail:
    remoteResources: []
context: getServiceStatus kubernetes output from provider local-kubernetes
errorDescription: "key \e[4m.forwardablePorts[0][name]\e[24m with value \"5432\" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/"
errorDetails: []


[2021-01-25T21:41:52.857Z] Getting status... → Cached

[2021-01-25T21:41:52.897Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:42:56.691Z] Getting status...

[2021-01-25T21:42:59.508Z] Getting status... → Cached

[2021-01-25T21:42:59.531Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:43:00.852Z]  Processing...

[2021-01-25T21:43:00.880Z] Syncing module sources (1 file)...

[2021-01-25T21:43:00.909Z] Syncing module sources (5 files)...

[2021-01-25T21:43:00.921Z] Syncing module sources (9 files)...

[2021-01-25T21:43:01.506Z] Syncing module sources (1 file)... → Done (took 0.6 sec)

[2021-01-25T21:43:01.526Z] Getting build status for v-c681d2b0e0...

[2021-01-25T21:43:01.542Z] Building version v-c681d2b0e0...

[2021-01-25T21:43:01.564Z] Syncing module sources (5 files)... → Done (took 0.7 sec)

[2021-01-25T21:43:01.586Z] Getting build status for v-10459a9db8...

[2021-01-25T21:43:01.605Z] Syncing module sources (9 files)... → Done (took 0.7 sec)

[2021-01-25T21:43:01.618Z] Getting build status for v-8ce937de16...

[2021-01-25T21:43:01.637Z] Getting build status for v-e478977d08...

[2021-01-25T21:43:01.652Z] Building version v-e478977d08...

[2021-01-25T21:43:01.730Z] Building version v-c681d2b0e0... → Done (took 0.2 sec)

[2021-01-25T21:43:01.757Z] Deploying version v-c681d2b0e0...

[2021-01-25T21:43:01.852Z] Getting build status for v-3a4706eb4b...

[2021-01-25T21:43:01.866Z] Building version v-3a4706eb4b...

[2021-01-25T21:43:01.893Z] Building version v-e478977d08... → Done (took 0.2 sec)

[2021-01-25T21:43:01.951Z] Error validating getServiceStatus kubernetes output from provider local-kubernetes: key .forwardablePorts[0][name] with value "5432" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/

Error Details:

value:
  forwardablePorts: []
  state: outdated
  detail:
    remoteResources: []
context: getServiceStatus kubernetes output from provider local-kubernetes
errorDescription: "key \e[4m.forwardablePorts[0][name]\e[24m with value \"5432\" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/"
errorDetails: []


[2021-01-25T21:43:01.990Z] Getting build status for v-10459a9db8... → Done (took 0.4 sec)

[2021-01-25T21:43:02.023Z] Getting build status for v-8ce937de16... → Done (took 0.4 sec)

[2021-01-25T21:43:02.052Z] Building version v-3a4706eb4b... → Done (took 0.2 sec)

[2021-01-25T21:43:02.094Z] Deploying version v-3a4706eb4b...

[2021-01-25T21:43:02.118Z] Deploying version v-c681d2b0e0... → Done (took 0.4 sec)

[2021-01-25T21:43:02.141Z] Deploying version v-3a4706eb4b... → Done (took 0.1 sec)

[2021-01-25T21:43:02.176Z] Waiting for code changes...

[2021-01-25T21:46:29.212Z] Getting status...

[2021-01-25T21:46:31.307Z] Getting status... → Cached

[2021-01-25T21:46:31.328Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:46:48.349Z] Module configuration changed, reloading...

[2021-01-25T21:46:49.210Z] Garden dashboard running at http://localhost:9777

[2021-01-25T21:46:49.239Z] Getting status...

[2021-01-25T21:46:49.344Z] Error validating getServiceStatus kubernetes output from provider local-kubernetes: key .forwardablePorts[0][name] with value "5432" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/

Error Details:

value:
  forwardablePorts: []
  state: outdated
  detail:
    remoteResources: []
context: getServiceStatus kubernetes output from provider local-kubernetes
errorDescription: "key \e[4m.forwardablePorts[0][name]\e[24m with value \"5432\" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/"
errorDetails: []


[2021-01-25T21:46:51.940Z] Getting status... → Cached

[2021-01-25T21:46:51.972Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:47:05.924Z]  Processing...

[2021-01-25T21:47:05.976Z] Syncing module sources (5 files)...

[2021-01-25T21:47:05.995Z] Syncing module sources (1 file)...

[2021-01-25T21:47:06.040Z] Syncing module sources (9 files)...

[2021-01-25T21:47:06.542Z] Error validating getServiceStatus kubernetes output from provider local-kubernetes: key .forwardablePorts[0][name] with value "5432" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/

Error Details:

value:
  forwardablePorts: []
  state: outdated
  detail:
    remoteResources: []
context: getServiceStatus kubernetes output from provider local-kubernetes
errorDescription: "key \e[4m.forwardablePorts[0][name]\e[24m with value \"5432\" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/"
errorDetails: []


[2021-01-25T21:47:06.580Z] Getting build status for v-13f6aced1a...

[2021-01-25T21:47:06.604Z] Building version v-13f6aced1a...

[2021-01-25T21:47:06.637Z] Syncing module sources (9 files)... → Done (took 0.6 sec)

[2021-01-25T21:47:06.668Z] Getting build status for v-8ce937de16...

[2021-01-25T21:47:06.702Z] Syncing module sources (1 file)... → Done (took 0.7 sec)

[2021-01-25T21:47:06.729Z] Getting build status for v-c681d2b0e0...

[2021-01-25T21:47:06.751Z] Building version v-c681d2b0e0...

[2021-01-25T21:47:06.782Z] Syncing module sources (5 files)... → Done (took 0.8 sec)

[2021-01-25T21:47:06.805Z] Getting build status for v-10459a9db8...

[2021-01-25T21:47:06.841Z] Getting build status for v-3a4706eb4b...

[2021-01-25T21:47:06.861Z] Building version v-3a4706eb4b...

[2021-01-25T21:47:07.059Z] Building version v-13f6aced1a... → Done (took 0.5 sec)

[2021-01-25T21:47:07.101Z] Building version v-c681d2b0e0... → Done (took 0.4 sec)

[2021-01-25T21:47:07.126Z] Deploying version v-c681d2b0e0...

[2021-01-25T21:47:07.166Z] Building version v-3a4706eb4b... → Done (took 0.3 sec)

[2021-01-25T21:47:07.192Z] Deploying version v-3a4706eb4b...

[2021-01-25T21:47:07.224Z] Getting build status for v-10459a9db8... → Done (took 0.4 sec)

[2021-01-25T21:47:07.244Z] Getting build status for v-8ce937de16... → Done (took 0.6 sec)

[2021-01-25T21:47:07.266Z] Deploying version v-c681d2b0e0... → Done (took 0.1 sec)

[2021-01-25T21:47:07.297Z] Deploying version v-3a4706eb4b... → Done (took 0.1 sec)

[2021-01-25T21:47:07.325Z] Waiting for code changes...

[2021-01-25T21:48:01.146Z] Build 

[2021-01-25T21:48:01.184Z] Getting status...

[2021-01-25T21:48:03.853Z] Getting status... → Cached

[2021-01-25T21:48:03.856Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:48:05.203Z] Syncing module sources (1 file)...

[2021-01-25T21:48:05.215Z] Syncing module sources (5 files)...

[2021-01-25T21:48:05.221Z] Syncing module sources (9 files)...

[2021-01-25T21:48:05.501Z] Getting build status for v-e478977d08...

[2021-01-25T21:48:05.507Z] Building version v-e478977d08...

[2021-01-25T21:48:05.516Z] Building version v-e478977d08... → Done (took 0 sec)

[2021-01-25T21:48:05.544Z] Syncing module sources (1 file)... → Done (took 0.3 sec)

[2021-01-25T21:48:05.552Z] Getting build status for v-c681d2b0e0...

[2021-01-25T21:48:05.560Z] Building version v-c681d2b0e0...

[2021-01-25T21:48:05.577Z] Syncing module sources (9 files)... → Done (took 0.3 sec)

[2021-01-25T21:48:05.585Z] Getting build status for v-8ce937de16...

[2021-01-25T21:48:05.597Z] Syncing module sources (5 files)... → Done (took 0.4 sec)

[2021-01-25T21:48:05.608Z] Getting build status for v-10459a9db8...

[2021-01-25T21:48:05.690Z] Building version v-c681d2b0e0... → Done (took 0.1 sec)

[2021-01-25T21:48:05.768Z] Getting build status for v-3a4706eb4b...

[2021-01-25T21:48:05.774Z] Building version v-3a4706eb4b...

[2021-01-25T21:48:05.784Z] Building version v-3a4706eb4b... → Done (took 0 sec)

[2021-01-25T21:48:05.808Z] Getting build status for v-8ce937de16... → Done (took 0.2 sec)

[2021-01-25T21:48:05.827Z] Getting build status for v-10459a9db8... → Done (took 0.2 sec)

[2021-01-25T21:48:05.838Z] Done! 

[2021-01-25T21:48:43.758Z] Validate 

[2021-01-25T21:48:43.769Z] Getting status...

[2021-01-25T21:48:46.308Z] Getting status... → Cached

[2021-01-25T21:48:46.310Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:50:03.838Z] Getting status...

[2021-01-25T21:50:06.628Z] Getting status... → Cached

[2021-01-25T21:50:06.653Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:50:07.971Z]  Processing...

[2021-01-25T21:50:08.000Z] Syncing module sources (1 file)...

[2021-01-25T21:50:08.030Z] Syncing module sources (5 files)...

[2021-01-25T21:50:08.041Z] Syncing module sources (9 files)...

[2021-01-25T21:50:08.642Z] Syncing module sources (1 file)... → Done (took 0.6 sec)

[2021-01-25T21:50:08.663Z] Getting build status for v-c681d2b0e0...

[2021-01-25T21:50:08.686Z] Building version v-c681d2b0e0...

[2021-01-25T21:50:08.704Z] Getting build status for v-e478977d08...

[2021-01-25T21:50:08.718Z] Building version v-e478977d08...

[2021-01-25T21:50:08.743Z] Syncing module sources (5 files)... → Done (took 0.7 sec)

[2021-01-25T21:50:08.759Z] Getting build status for v-10459a9db8...

[2021-01-25T21:50:08.775Z] Syncing module sources (9 files)... → Done (took 0.7 sec)

[2021-01-25T21:50:08.794Z] Getting build status for v-8ce937de16...

[2021-01-25T21:50:08.935Z] Getting build status for v-3a4706eb4b...

[2021-01-25T21:50:08.957Z] Building version v-3a4706eb4b...

[2021-01-25T21:50:08.985Z] Building version v-e478977d08... → Done (took 0.3 sec)

[2021-01-25T21:50:09.003Z] Building version v-c681d2b0e0... → Done (took 0.3 sec)

[2021-01-25T21:50:09.020Z] Deploying version v-c681d2b0e0...

[2021-01-25T21:50:09.052Z] Getting build status for v-8ce937de16... → Done (took 0.3 sec)

[2021-01-25T21:50:09.070Z] Getting build status for v-10459a9db8... → Done (took 0.3 sec)

[2021-01-25T21:50:09.118Z] Error validating getServiceStatus kubernetes output from provider local-kubernetes: key .forwardablePorts[0][name] with value "5432" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/

Error Details:

value:
  forwardablePorts: []
  state: outdated
  detail:
    remoteResources: []
context: getServiceStatus kubernetes output from provider local-kubernetes
errorDescription: "key \e[4m.forwardablePorts[0][name]\e[24m with value \"5432\" fails to match the required pattern: /^(?![0-9]+$)(?!.*-$)(?!-)[a-z0-9-]{1,63}$/"
errorDetails: []


[2021-01-25T21:50:09.151Z] Building version v-3a4706eb4b... → Done (took 0.2 sec)

[2021-01-25T21:50:09.182Z] Deploying version v-3a4706eb4b...

[2021-01-25T21:50:09.218Z] Deploying version v-3a4706eb4b... → Done (took 0 sec)

[2021-01-25T21:50:09.236Z] Deploying version v-c681d2b0e0... → Done (took 0.2 sec)

[2021-01-25T21:50:09.278Z] Waiting for code changes...

[2021-01-25T21:54:46.985Z] Getting status...

[2021-01-25T21:54:52.322Z] Getting status... → Cached

[2021-01-25T21:54:52.344Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:54:53.509Z]  Processing...

[2021-01-25T21:54:53.523Z] Syncing module sources (1 file)...

[2021-01-25T21:54:53.540Z] Syncing module sources (5 files)...

[2021-01-25T21:54:53.551Z] Syncing module sources (9 files)...

[2021-01-25T21:54:53.925Z] Syncing module sources (9 files)... → Done (took 0.4 sec)

[2021-01-25T21:54:53.949Z] Getting build status for v-8ce937de16...

[2021-01-25T21:54:53.975Z] Syncing module sources (5 files)... → Done (took 0.4 sec)

[2021-01-25T21:54:54.006Z] Getting build status for v-5770660f7b...

[2021-01-25T21:54:54.029Z] Syncing module sources (1 file)... → Done (took 0.5 sec)

[2021-01-25T21:54:54.057Z] Getting build status for v-105f128a55...

[2021-01-25T21:54:54.270Z] Getting build status for v-3a4706eb4b...

[2021-01-25T21:54:54.286Z] Building version v-3a4706eb4b...

[2021-01-25T21:54:54.304Z] Getting build status for v-8ce937de16... → Done (took 0.4 sec)

[2021-01-25T21:54:54.327Z] Building version v-5770660f7b...

[2021-01-25T21:54:54.345Z] Building version v-105f128a55...

[2021-01-25T21:54:54.365Z] Building version v-3a4706eb4b... → Done (took 0.1 sec)

[2021-01-25T21:54:54.391Z] Deploying version v-3a4706eb4b...

[2021-01-25T21:54:54.662Z] Building postgres:v-5770660f7b...

[2021-01-25T21:54:54.759Z] Building ecom-backend:v-105f128a55...

[2021-01-25T21:54:54.849Z] Deploying version v-3a4706eb4b... → Done (took 0.5 sec)

[2021-01-25T21:54:55.005Z] Building ecom-backend:v-105f128a55...

[2021-01-25T21:54:55.030Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t ecom-backend:v-105f128a55 --build-arg GARDEN_MODULE_VERSION=v-105f128a55 --file /home/kriley/code/ecom/.garden/build/ecom-backend/Dockerfile /home/kriley/code/ecom/.garden/build/ecom-backend" failed with code 1:

COPY failed: file not found in build context or excluded by .dockerignore: stat go.mod: file does not exist

Here's the full output:

Sending build context to Docker daemon   2.56kB
Step 1/16 : FROM golang:1.15.2-alpine as build_base
 ---> b3bc898ad092
Step 2/16 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> adb2753c109e
Step 3/16 : WORKDIR /go/src/app/
 ---> Using cache
 ---> eeab7eff4b02
Step 4/16 : COPY go.mod .
COPY failed: file not found in build context or excluded by .dockerignore: stat go.mod: file does not exist

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-backend


[2021-01-25T21:54:55.500Z] Building postgres:v-5770660f7b... → Done (took 1.5 sec)

[2021-01-25T21:54:55.548Z] Waiting for code changes...

[2021-01-25T21:56:24.631Z]  Processing...

[2021-01-25T21:56:24.677Z] Syncing module sources (1 file)...

[2021-01-25T21:56:24.710Z] Syncing module sources (5 files)...

[2021-01-25T21:56:24.918Z] Syncing module sources (5 files)... → Done (took 0.2 sec)

[2021-01-25T21:56:24.944Z] Building version v-863f67c3f3...

[2021-01-25T21:56:24.970Z] Syncing module sources (1 file)... → Done (took 0.3 sec)

[2021-01-25T21:56:24.993Z] Building version v-15b42cc8b7...

[2021-01-25T21:56:25.261Z] Building ecom-backend:v-15b42cc8b7...

[2021-01-25T21:56:25.345Z] Building postgres:v-863f67c3f3...

[2021-01-25T21:56:28.325Z] Building postgres:v-863f67c3f3...

[2021-01-25T21:56:28.370Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t postgres:v-863f67c3f3 --build-arg GARDEN_MODULE_VERSION=v-863f67c3f3 /home/kriley/code/ecom/.garden/build/ecom-postgres" failed with code 1:

The command '/bin/sh -c go mod download' returned a non-zero code: 1

Here's the full output:

Sending build context to Docker daemon   7.68kB
Step 1/15 : FROM golang:1.15.2-alpine as build_base
 ---> b3bc898ad092
Step 2/15 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> adb2753c109e
Step 3/15 : WORKDIR /go/src/app/
 ---> Using cache
 ---> eeab7eff4b02
Step 4/15 : RUN go mod download
 ---> Running in 4e623d8da60c
go mod download: no modules specified (see 'go help mod download')
The command '/bin/sh -c go mod download' returned a non-zero code: 1

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-postgres


[2021-01-25T21:56:28.484Z] Building ecom-backend:v-15b42cc8b7...

[2021-01-25T21:56:28.520Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t ecom-backend:v-15b42cc8b7 --build-arg GARDEN_MODULE_VERSION=v-15b42cc8b7 --file /home/kriley/code/ecom/.garden/build/ecom-backend/Dockerfile /home/kriley/code/ecom/.garden/build/ecom-backend" failed with code 1:

The command '/bin/sh -c go mod download' returned a non-zero code: 1

Here's the full output:

Sending build context to Docker daemon  2.048kB
Step 1/15 : FROM golang:1.15.2-alpine as build_base
 ---> b3bc898ad092
Step 2/15 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> adb2753c109e
Step 3/15 : WORKDIR /go/src/app/
 ---> Using cache
 ---> eeab7eff4b02
Step 4/15 : RUN go mod download
 ---> Running in ecdfcda61bf5
go mod download: no modules specified (see 'go help mod download')
The command '/bin/sh -c go mod download' returned a non-zero code: 1

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-backend


[2021-01-25T21:56:28.554Z] Waiting for code changes...

[2021-01-25T21:56:41.582Z]  Processing...

[2021-01-25T21:56:41.607Z] Syncing module sources (1 file)...

[2021-01-25T21:56:41.627Z] Syncing module sources (5 files)...

[2021-01-25T21:56:41.798Z] Syncing module sources (5 files)... → Done (took 0.2 sec)

[2021-01-25T21:56:41.829Z] Building version v-5770660f7b...

[2021-01-25T21:56:41.859Z] Syncing module sources (1 file)... → Done (took 0.2 sec)

[2021-01-25T21:56:41.890Z] Building version v-105f128a55...

[2021-01-25T21:56:42.168Z] Building postgres:v-5770660f7b...

[2021-01-25T21:56:42.284Z] Building ecom-backend:v-105f128a55...

[2021-01-25T21:56:42.531Z] Building ecom-backend:v-105f128a55...

[2021-01-25T21:56:42.571Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t ecom-backend:v-105f128a55 --build-arg GARDEN_MODULE_VERSION=v-105f128a55 --file /home/kriley/code/ecom/.garden/build/ecom-backend/Dockerfile /home/kriley/code/ecom/.garden/build/ecom-backend" failed with code 1:

COPY failed: file not found in build context or excluded by .dockerignore: stat go.mod: file does not exist

Here's the full output:

Sending build context to Docker daemon   2.56kB
Step 1/16 : FROM golang:1.15.2-alpine as build_base
 ---> b3bc898ad092
Step 2/16 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> adb2753c109e
Step 3/16 : WORKDIR /go/src/app/
 ---> Using cache
 ---> eeab7eff4b02
Step 4/16 : COPY go.mod .
COPY failed: file not found in build context or excluded by .dockerignore: stat go.mod: file does not exist

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-backend


[2021-01-25T21:56:42.695Z] Building postgres:v-5770660f7b... → Done (took 0.9 sec)

[2021-01-25T21:56:42.723Z] Waiting for code changes...

[2021-01-25T21:57:36.631Z] Getting status...

[2021-01-25T21:57:39.066Z] Getting status... → Cached

[2021-01-25T21:57:39.094Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:57:52.692Z] Module configuration changed, reloading...

[2021-01-25T21:57:53.365Z] Garden dashboard running at http://localhost:9777

[2021-01-25T21:57:53.404Z] Getting status...

[2021-01-25T21:57:55.553Z] Getting status... → Cached

[2021-01-25T21:57:55.590Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T21:58:08.105Z]  Processing...

[2021-01-25T21:58:08.129Z] Syncing module sources (3 files)...

[2021-01-25T21:58:08.160Z] Syncing module sources (5 files)...

[2021-01-25T21:58:08.181Z] Syncing module sources (9 files)...

[2021-01-25T21:58:08.597Z] Syncing module sources (5 files)... → Done (took 0.4 sec)

[2021-01-25T21:58:08.643Z] Getting build status for v-5770660f7b...

[2021-01-25T21:58:08.683Z] Syncing module sources (9 files)... → Done (took 0.5 sec)

[2021-01-25T21:58:08.723Z] Getting build status for v-8ce937de16...

[2021-01-25T21:58:08.751Z] Syncing module sources (3 files)... → Done (took 0.6 sec)

[2021-01-25T21:58:08.786Z] Getting build status for v-8a04669d44...

[2021-01-25T21:58:08.816Z] Getting build status for v-3a4706eb4b...

[2021-01-25T21:58:08.856Z] Building version v-3a4706eb4b...

[2021-01-25T21:58:09.158Z] Building version v-3a4706eb4b... → Done (took 0.3 sec)

[2021-01-25T21:58:09.217Z] Deploying version v-3a4706eb4b...

[2021-01-25T21:58:09.249Z] Building version v-8a04669d44...

[2021-01-25T21:58:09.288Z] Getting build status for v-5770660f7b... → Done (took 0.7 sec)

[2021-01-25T21:58:09.340Z] Getting build status for v-8ce937de16... → Done (took 0.6 sec)

[2021-01-25T21:58:09.563Z] Deploying version v-3a4706eb4b... → Done (took 0.4 sec)

[2021-01-25T21:58:09.610Z] Building ecom-backend:v-8a04669d44...

[2021-01-25T21:58:15.534Z] Building ecom-backend:v-8a04669d44... → Done (took 6.7 sec)

[2021-01-25T21:58:15.575Z] Waiting for code changes...

[2021-01-25T21:59:05.749Z]  Processing...

[2021-01-25T21:59:05.793Z] Waiting for code changes...

[2021-01-25T22:00:13.908Z] Getting status...

[2021-01-25T22:00:15.969Z] Getting status... → Cached

[2021-01-25T22:00:16.005Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T22:00:33.212Z] Module configuration changed, reloading...

[2021-01-25T22:00:34.065Z] Garden dashboard running at http://localhost:9777

[2021-01-25T22:00:34.109Z] Getting status...

[2021-01-25T22:00:36.387Z] Getting status... → Cached

[2021-01-25T22:00:36.418Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T22:00:52.071Z]  Processing...

[2021-01-25T22:00:52.115Z] Syncing module sources (1 file)...

[2021-01-25T22:00:52.148Z] Syncing module sources (5 files)...

[2021-01-25T22:00:52.187Z] Syncing module sources (3 files)...

[2021-01-25T22:00:52.629Z] Syncing module sources (1 file)... → Done (took 0.5 sec)

[2021-01-25T22:00:52.662Z] Getting build status for v-07a3277b70...

[2021-01-25T22:00:52.704Z] Syncing module sources (3 files)... → Done (took 0.5 sec)

[2021-01-25T22:00:52.736Z] Getting build status for v-8a04669d44...

[2021-01-25T22:00:52.775Z] Syncing module sources (5 files)... → Done (took 0.6 sec)

[2021-01-25T22:00:52.801Z] Getting build status for v-5770660f7b...

[2021-01-25T22:00:52.839Z] Getting build status for v-3a4706eb4b...

[2021-01-25T22:00:52.878Z] Building version v-3a4706eb4b...

[2021-01-25T22:00:53.173Z] Building version v-3a4706eb4b... → Done (took 0.3 sec)

[2021-01-25T22:00:53.231Z] Deploying version v-3a4706eb4b...

[2021-01-25T22:00:53.272Z] Getting build status for v-5770660f7b... → Done (took 0.5 sec)

[2021-01-25T22:00:53.333Z] Building version v-07a3277b70...

[2021-01-25T22:00:53.374Z] Getting build status for v-8a04669d44... → Done (took 0.6 sec)

[2021-01-25T22:00:53.692Z] Deploying version v-3a4706eb4b... → Done (took 0.4 sec)

[2021-01-25T22:00:53.789Z] Building ecom-api:v-07a3277b70...

[2021-01-25T22:00:54.098Z] Building ecom-api:v-07a3277b70...

[2021-01-25T22:00:54.152Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t ecom-api:v-07a3277b70 --build-arg GARDEN_MODULE_VERSION=v-07a3277b70 --file /home/kriley/code/ecom/.garden/build/ecom-api/Dockerfile /home/kriley/code/ecom/.garden/build/ecom-api" failed with code 1:

COPY failed: file not found in build context or excluded by .dockerignore: stat go.mod: file does not exist

Here's the full output:

Sending build context to Docker daemon   2.56kB
Step 1/17 : FROM golang:1.14.2-alpine as build_base
 ---> dda4232b2bd5
Step 2/17 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> a092f81f67cb
Step 3/17 : WORKDIR /go/src/app
 ---> Using cache
 ---> c0cd9fe7a660
Step 4/17 : COPY go.mod .
COPY failed: file not found in build context or excluded by .dockerignore: stat go.mod: file does not exist

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-api


[2021-01-25T22:00:54.212Z] Waiting for code changes...

[2021-01-25T22:04:01.328Z] Getting status...

[2021-01-25T22:04:03.834Z] Getting status... → Cached

[2021-01-25T22:04:03.878Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T22:04:18.911Z] Module configuration changed, reloading...

[2021-01-25T22:04:19.719Z] Garden dashboard running at http://localhost:9777

[2021-01-25T22:04:19.783Z] Getting status...

[2021-01-25T22:04:21.953Z] Getting status... → Cached

[2021-01-25T22:04:22.008Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T22:04:35.334Z]  Processing...

[2021-01-25T22:04:35.367Z] Syncing module sources (1 file)...

[2021-01-25T22:04:35.440Z] Syncing module sources (3 files)...

[2021-01-25T22:04:35.483Z] Syncing module sources (5 files)...

[2021-01-25T22:04:35.970Z] Syncing module sources (1 file)... → Done (took 0.6 sec)

[2021-01-25T22:04:36.021Z] Getting build status for v-47139a217a...

[2021-01-25T22:04:36.071Z] Syncing module sources (5 files)... → Done (took 0.6 sec)

[2021-01-25T22:04:36.106Z] Getting build status for v-5770660f7b...

[2021-01-25T22:04:36.147Z] Syncing module sources (3 files)... → Done (took 0.7 sec)

[2021-01-25T22:04:36.180Z] Getting build status for v-8a04669d44...

[2021-01-25T22:04:36.434Z] Getting build status for v-3a4706eb4b...

[2021-01-25T22:04:36.479Z] Building version v-3a4706eb4b...

[2021-01-25T22:04:36.631Z] Getting build status for v-5770660f7b... → Done (took 0.5 sec)

[2021-01-25T22:04:36.685Z] Building version v-47139a217a...

[2021-01-25T22:04:36.734Z] Getting build status for v-8a04669d44... → Done (took 0.5 sec)

[2021-01-25T22:04:36.774Z] Building version v-3a4706eb4b... → Done (took 0.4 sec)

[2021-01-25T22:04:36.815Z] Deploying version v-3a4706eb4b...

[2021-01-25T22:04:37.071Z] Deploying version v-3a4706eb4b... → Done (took 0.2 sec)

[2021-01-25T22:04:37.129Z] Building ecom-api:v-47139a217a...

[2021-01-25T22:04:37.417Z] Building ecom-api:v-47139a217a...

[2021-01-25T22:04:37.475Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t ecom-api:v-47139a217a --build-arg GARDEN_MODULE_VERSION=v-47139a217a --file /home/kriley/code/ecom/.garden/build/ecom-api/Dockerfile /home/kriley/code/ecom/.garden/build/ecom-api" failed with code 1:

COPY failed: file not found in build context or excluded by .dockerignore: stat go.mod: file does not exist

Here's the full output:

Sending build context to Docker daemon   2.56kB
Step 1/17 : FROM golang:1.14.2-alpine as build_base
 ---> dda4232b2bd5
Step 2/17 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> a092f81f67cb
Step 3/17 : WORKDIR /go/src/app
 ---> Using cache
 ---> c0cd9fe7a660
Step 4/17 : COPY go.mod .
COPY failed: file not found in build context or excluded by .dockerignore: stat go.mod: file does not exist

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-api


[2021-01-25T22:04:37.535Z] Waiting for code changes...

[2021-01-25T22:04:45.873Z] Getting status...

[2021-01-25T22:04:49.325Z] Getting status... → Cached

[2021-01-25T22:04:49.370Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T22:05:02.976Z] Failed resolving one or more modules:

ecom-ui: Error validating Module 'ecom-ui' (ecom-ui): key "services" is not allowed at path [services]

Error Details:

errors: {}


[2021-01-25T22:05:18.247Z] Getting status...

[2021-01-25T22:05:23.432Z] Getting status... → Cached

[2021-01-25T22:05:23.481Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T22:05:37.584Z] Failed resolving one or more modules:

ecom-backend: Error validating Module 'ecom-backend' (ecom-backend): key .services[0] must be of type object
ecom-ui: Error validating Module 'ecom-ui' (ecom-ui): key .services[0] must be of type object

Error Details:

errors: {}


[2021-01-25T22:05:37.657Z] Getting status...

[2021-01-25T22:05:40.266Z] Getting status... → Cached

[2021-01-25T22:05:40.320Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T22:05:57.611Z] Failed resolving one or more modules:

ecom-backend: Error validating Module 'ecom-backend' (ecom-backend): key .services[0] must be of type object
ecom-ui: Error validating Module 'ecom-ui' (ecom-ui): key .services[0] must be of type object

Error Details:

errors: {}


[2021-01-25T22:05:57.710Z]  Processing...

[2021-01-25T22:05:57.799Z] Waiting for code changes...

[2021-01-25T22:06:17.178Z] Getting status...

[2021-01-25T22:06:19.834Z] Getting status... → Cached

[2021-01-25T22:06:19.908Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T22:06:32.845Z] Failed resolving one or more modules:

ecom-backend: Error validating Module 'ecom-backend' (ecom-backend): key .services[0] must be of type object
ecom-ui: Error validating Module 'ecom-ui' (ecom-ui): key .services[0] must be of type object

Error Details:

errors: {}


[2021-01-25T22:06:33.676Z] Getting status...

[2021-01-25T22:06:36.446Z] Getting status... → Cached

[2021-01-25T22:06:36.507Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T22:06:48.232Z] Getting status...

[2021-01-25T22:06:51.209Z] Failed resolving one or more modules:

ecom-ui: Module ecom-ui neither specifies image nor provides Dockerfile

Error Details:

errors: {}


[2021-01-25T22:06:52.939Z] Getting status... → Cached

[2021-01-25T22:06:52.994Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-25T22:07:11.556Z] Failed resolving one or more modules:

ecom-ui: Module ecom-ui neither specifies image nor provides Dockerfile

Error Details:

errors: {}


[2021-01-25T22:07:11.774Z]  Processing...

[2021-01-25T22:07:11.848Z] Waiting for code changes...

[2021-01-26T03:01:28.787Z] Getting status...

[2021-01-26T03:01:32.298Z] Command "minikube ip" failed with code 89:

Here's the full output:

* The control plane node must be running for this command
  - To start a cluster, run: "minikube start"

Error Details:

shortMessage: 'Command failed with exit code 89: minikube ip'
command: minikube ip
exitCode: 89
stdout: |-
  * The control plane node must be running for this command
    - To start a cluster, run: "minikube start"
stderr: ''
all: |-
  * The control plane node must be running for this command
    - To start a cluster, run: "minikube start"
failed: true
timedOut: false
isCanceled: false
killed: false


[2021-01-26T03:01:32.321Z] Failed resolving one or more providers:
- local-kubernetes

Error Details:

rawConfigs: []
taskResults:
  resolve-provider.exec:
    type: resolve-provider
    key: resolve-provider.exec
    name: exec
    description: resolving provider exec
    completedAt: 2021-01-26T03:01:29.337Z
    batchId: 9ebd2e58-59d6-4f2b-88f0-91d036deae0b
    output:
      name: exec
      dependencies: {}
      moduleConfigs: []
      config:
        name: exec
        dependencies: []
        path: /home/kriley/code/ecom
      status:
        ready: true
        outputs: {}
      dashboardPages: []
    dependencyResults: {}
    version: 0.12.12
    startedAt: 2021-01-26T03:01:29.216Z
  resolve-provider.container:
    type: resolve-provider
    key: resolve-provider.container
    name: container
    description: resolving provider container
    completedAt: 2021-01-26T03:01:29.330Z
    batchId: 32f622e9-81c9-4127-b0a0-16e048c51247
    output:
      name: container
      dependencies: {}
      moduleConfigs: []
      config:
        name: container
        dependencies: []
        path: /home/kriley/code/ecom
      status:
        ready: true
        outputs: {}
      dashboardPages: []
    dependencyResults: {}
    version: 0.12.12
    startedAt: 2021-01-26T03:01:29.217Z
  resolve-provider.local-kubernetes:
    type: resolve-provider
    description: resolving provider local-kubernetes
    key: resolve-provider.local-kubernetes
    name: local-kubernetes
    startedAt: 2021-01-26T03:01:29.333Z
    completedAt: 2021-01-26T03:01:32.250Z
    batchId: 32f622e9-81c9-4127-b0a0-16e048c51247
    version: 0.12.12
  resolve-provider.templated:
    type: resolve-provider
    key: resolve-provider.templated
    name: templated
    description: resolving provider templated
    completedAt: 2021-01-26T03:01:29.338Z
    batchId: 932b4017-4ae8-4de2-b9d9-5289ae3e5b32
    output:
      name: templated
      dependencies: {}
      moduleConfigs: []
      config:
        name: templated
        path: /home/kriley/code/ecom
      status:
        ready: true
        outputs: {}
      dashboardPages: []
    dependencyResults: {}
    version: 0.12.12
    startedAt: 2021-01-26T03:01:29.218Z
messages: []


[2021-01-26T03:01:32.339Z] 
See error.log for detailed error message

[2021-01-26T03:01:32.457Z] Getting status...

[2021-01-26T03:03:45.649Z] Getting status...

[2021-01-26T03:03:48.430Z] Getting status... → Cached

[2021-01-26T03:03:48.436Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:03:48.865Z] Failed resolving one or more modules:

ecom-ui: Invalid template string (${var.baseHostname}): Could not find key baseHostname under var. Available keys: baseHostName, postgres-database, postgres-password and postgres-username.

Error Details:

errors: {}


[2021-01-26T03:03:48.887Z] 
See error.log for detailed error message

[2021-01-26T03:05:39.856Z] Getting status...

[2021-01-26T03:05:41.538Z] Getting status... → Cached

[2021-01-26T03:05:41.545Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:05:41.979Z] Failed resolving one or more modules:

ecom-ui: Invalid template string (${baseHostname}): Could not find key baseHostname. Available keys: environment, git, inputs, local, modules, project, providers, runtime, secrets, var and variables.

Error Details:

errors: {}


[2021-01-26T03:05:41.995Z] 
See error.log for detailed error message

[2021-01-26T03:10:27.870Z] Getting status...

[2021-01-26T03:10:29.788Z] Getting status... → Cached

[2021-01-26T03:10:29.801Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:10:49.498Z]  Processing...

[2021-01-26T03:10:49.549Z] Syncing module sources (1 file)...

[2021-01-26T03:10:49.580Z] Syncing module sources (35840 files)...

[2021-01-26T03:10:49.898Z] Syncing module sources (3 files)...

[2021-01-26T03:10:50.365Z] Syncing module sources (3 files)... → Done (took 0.5 sec)

[2021-01-26T03:10:50.408Z] Getting build status for v-26327ddc3e...

[2021-01-26T03:10:50.473Z] Getting build status for v-0acb088676...

[2021-01-26T03:10:50.500Z] Getting build status for v-0acb088676... → Done (took 0.1 sec)

[2021-01-26T03:10:50.536Z] Deploying version v-0acb088676...

[2021-01-26T03:10:50.595Z] Syncing module sources (1 file)... → Done (took 1 sec)

[2021-01-26T03:10:50.631Z] Getting build status for v-cfa4e26189...

[2021-01-26T03:10:54.818Z] Building version v-cfa4e26189...

[2021-01-26T03:10:54.845Z] Building version v-26327ddc3e...

[2021-01-26T03:10:55.225Z] Building ecom-api:v-cfa4e26189...

[2021-01-26T03:10:55.350Z] Building ecom-backend:v-26327ddc3e...

[2021-01-26T03:10:55.763Z] Building ecom-api:v-cfa4e26189...

[2021-01-26T03:10:55.796Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t ecom-api:v-cfa4e26189 --build-arg GARDEN_MODULE_VERSION=v-cfa4e26189 --file /home/kriley/code/ecom/.garden/build/ecom-api/Dockerfile /home/kriley/code/ecom/.garden/build/ecom-api" failed with code 1:

COPY failed: file not found in build context or excluded by .dockerignore: stat go.mod: file does not exist

Here's the full output:

Sending build context to Docker daemon   2.56kB
Step 1/18 : FROM golang:1.14.2-alpine as build_base
 ---> dda4232b2bd5
Step 2/18 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> a092f81f67cb
Step 3/18 : WORKDIR /go/src/app
 ---> Using cache
 ---> c0cd9fe7a660
Step 4/18 : COPY go.mod .
COPY failed: file not found in build context or excluded by .dockerignore: stat go.mod: file does not exist

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-api


[2021-01-26T03:10:57.230Z] Building ecom-backend:v-26327ddc3e... → Done (took 6.8 sec)

[2021-01-26T03:10:57.261Z] Deploying version v-26327ddc3e...

[2021-01-26T03:10:57.658Z] Waiting for resources to be ready...

[2021-01-26T03:10:58.988Z] Waiting for resources to be ready...

[2021-01-26T03:10:59.716Z] Deployment/db: Started container db

[2021-01-26T03:11:01.034Z] Deployment/ecom-backend: Container image "ecom-backend:v-26327ddc3e" already present on machine

[2021-01-26T03:11:02.489Z] Deployment/db: Readiness probe failed: psql: error: could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?


[2021-01-26T03:11:03.759Z] Syncing module sources (35840 files)... → Done (took 14.2 sec)

[2021-01-26T03:11:03.781Z] Getting build status for v-87e0b388bf...

[2021-01-26T03:11:03.857Z] Deployment/ecom-backend: Started container ecom-backend

[2021-01-26T03:11:03.956Z] Building version v-87e0b388bf...

[2021-01-26T03:11:04.083Z] Building ecom-ui:v-87e0b388bf...

[2021-01-26T03:11:05.608Z] Deployment/db: Readiness probe failed: psql: error: FATAL:  role "ecomuser" does not exist


[2021-01-26T03:11:06.932Z] Deploying version v-26327ddc3e...

[2021-01-26T03:11:06.960Z] Error deploying ecom-backend: CrashLoopBackOff - back-off 10s restarting failed container=ecom-backend pod=ecom-backend-7c75b7fd8d-wltp7_ecom-default(299aa0d5-28f6-42d2-95a8-9b79dbbf304b)

━━━ Events ━━━
Deployment ecom-backend: ScalingReplicaSet - Scaled up replica set ecom-backend-7c75b7fd8d to 1
Pod ecom-backend-7c75b7fd8d-wltp7: Scheduled - Successfully assigned ecom-default/ecom-backend-7c75b7fd8d-wltp7 to minikube
Pod ecom-backend-7c75b7fd8d-wltp7: Pulled - Container image "ecom-backend:v-26327ddc3e" already present on machine
Pod ecom-backend-7c75b7fd8d-wltp7: Created - Created container ecom-backend
Pod ecom-backend-7c75b7fd8d-wltp7: Started - Started container ecom-backend
Pod ecom-backend-7c75b7fd8d-wltp7: BackOff - Back-off restarting failed container

━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/ecom-backend

****** ecom-backend-7c75b7fd8d-wltp7 ******
------ ecom-backend ------Go Backend Server


Error Details:

serviceName: ecom-backend
status:
  state: unhealthy
  lastMessage: >-
    CrashLoopBackOff - back-off 10s restarting failed container=ecom-backend
    pod=ecom-backend-7c75b7fd8d-wltp7_ecom-default(299aa0d5-28f6-42d2-95a8-9b79dbbf304b)
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment ecom-backend:\e[39m \e[37mScalingReplicaSet - Scaled up replica set ecom-backend-7c75b7fd8d to 1\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mScheduled - Successfully assigned ecom-default/ecom-backend-7c75b7fd8d-wltp7 to minikube\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mPulled - Container image \"ecom-backend:v-26327ddc3e\" already present on machine\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mCreated - Created container ecom-backend\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mStarted - Started container ecom-backend\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[33mBackOff - Back-off restarting failed container\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/ecom-backend\e[39m\n\e[94m\e[39m\n\e[94m****** ecom-backend-7c75b7fd8d-wltp7 ******\e[39m\n\e[94m\e[39m\e[90m------ ecom-backend ------\e[39mGo Backend Server\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: ecom-backend
      namespace: ecom-default
      uid: 6099f5ed-c7b7-4ff1-9e48-4f2afd3dd6a8
      resourceVersion: '7798'
      generation: 1
      creationTimestamp: '2021-01-26T03:10:57Z'
      labels:
        module: ecom-backend
        service: ecom-backend
      annotations:
        deployment.kubernetes.io/revision: '1'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: 2eb68d953e9c71de56130fa8244ab37248f341ad0d3061ae26c507986aa56ad8
        garden.io/version: v-26327ddc3e
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"2eb68d953e9c71de56130fa8244ab37248f341ad0d3061ae26c507986aa56ad8","garden.io/version":"v-26327ddc3e"},"labels":{"module":"ecom-backend","service":"ecom-backend"},"name":"ecom-backend","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"ecom-backend"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"ecom-backend","service":"ecom-backend"}},"spec":{"containers":[{"env":[{"name":"GARDEN_VERSION","value":"v-26327ddc3e"},{"name":"GARDEN_MODULE_VERSION","value":"v-26327ddc3e"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"ecom-backend\",\"name\":\"ecom-backend\",\"type\":\"build\",\"version\":\"v-26327ddc3e\"}]"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"ecom-backend:v-26327ddc3e","imagePullPolicy":"IfNotPresent","name":"ecom-backend","resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false}}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: ecom-backend
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: ecom-backend
            service: ecom-backend
        spec:
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 1
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:12:35.058Z] Getting status...

[2021-01-26T03:12:37.477Z] Getting status... → Cached

[2021-01-26T03:12:37.487Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:12:49.504Z]  Processing...

[2021-01-26T03:12:49.526Z] Syncing module sources (3 files)...

[2021-01-26T03:12:49.544Z] Syncing module sources (35840 files)...

[2021-01-26T03:12:49.718Z] Syncing module sources (3 files)...

[2021-01-26T03:12:50.004Z] Syncing module sources (3 files)... → Done (took 0.3 sec)

[2021-01-26T03:12:50.019Z] Getting build status for v-26327ddc3e...

[2021-01-26T03:12:50.047Z] Getting build status for v-0acb088676...

[2021-01-26T03:12:50.071Z] Getting build status for v-0acb088676... → Done (took 0 sec)

[2021-01-26T03:12:50.096Z] Syncing module sources (3 files)... → Done (took 0.6 sec)

[2021-01-26T03:12:50.115Z] Getting build status for v-581f44819b...

[2021-01-26T03:12:52.283Z] Building version v-581f44819b...

[2021-01-26T03:12:52.293Z] Getting build status for v-26327ddc3e... → Done (took 2.3 sec)

[2021-01-26T03:12:52.435Z] Deploying version v-0acb088676...

[2021-01-26T03:12:52.535Z] Building ecom-api:v-581f44819b...

[2021-01-26T03:12:52.641Z] Deploying version v-26327ddc3e...

[2021-01-26T03:12:54.039Z] Waiting for resources to be ready...

[2021-01-26T03:12:54.236Z] Waiting for resources to be ready...

[2021-01-26T03:12:56.090Z] Deployment/db: Readiness probe failed: psql: error: FATAL:  role "ecomuser" does not exist


[2021-01-26T03:12:56.288Z] Deploying version v-26327ddc3e...

[2021-01-26T03:12:56.323Z] Error deploying ecom-backend: BackOff - Back-off restarting failed container

━━━ Events ━━━
Deployment ecom-backend: ScalingReplicaSet - Scaled up replica set ecom-backend-7c75b7fd8d to 1
Pod ecom-backend-7c75b7fd8d-wltp7: Scheduled - Successfully assigned ecom-default/ecom-backend-7c75b7fd8d-wltp7 to minikube
Pod ecom-backend-7c75b7fd8d-wltp7: Pulled - Container image "ecom-backend:v-26327ddc3e" already present on machine
Pod ecom-backend-7c75b7fd8d-wltp7: Created - Created container ecom-backend
Pod ecom-backend-7c75b7fd8d-wltp7: Started - Started container ecom-backend
Pod ecom-backend-7c75b7fd8d-wltp7: BackOff - Back-off restarting failed container

━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/ecom-backend

****** ecom-backend-7c75b7fd8d-wltp7 ******
------ ecom-backend ------Go Backend Server


Error Details:

serviceName: ecom-backend
status:
  state: unhealthy
  lastMessage: BackOff - Back-off restarting failed container
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment ecom-backend:\e[39m \e[37mScalingReplicaSet - Scaled up replica set ecom-backend-7c75b7fd8d to 1\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mScheduled - Successfully assigned ecom-default/ecom-backend-7c75b7fd8d-wltp7 to minikube\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mPulled - Container image \"ecom-backend:v-26327ddc3e\" already present on machine\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mCreated - Created container ecom-backend\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mStarted - Started container ecom-backend\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[33mBackOff - Back-off restarting failed container\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/ecom-backend\e[39m\n\e[94m\e[39m\n\e[94m****** ecom-backend-7c75b7fd8d-wltp7 ******\e[39m\n\e[94m\e[39m\e[90m------ ecom-backend ------\e[39mGo Backend Server\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: ecom-backend
      namespace: ecom-default
      uid: 6099f5ed-c7b7-4ff1-9e48-4f2afd3dd6a8
      resourceVersion: '7798'
      generation: 1
      creationTimestamp: '2021-01-26T03:10:57Z'
      labels:
        module: ecom-backend
        service: ecom-backend
      annotations:
        deployment.kubernetes.io/revision: '1'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: 2eb68d953e9c71de56130fa8244ab37248f341ad0d3061ae26c507986aa56ad8
        garden.io/version: v-26327ddc3e
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"2eb68d953e9c71de56130fa8244ab37248f341ad0d3061ae26c507986aa56ad8","garden.io/version":"v-26327ddc3e"},"labels":{"module":"ecom-backend","service":"ecom-backend"},"name":"ecom-backend","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"ecom-backend"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"ecom-backend","service":"ecom-backend"}},"spec":{"containers":[{"env":[{"name":"GARDEN_VERSION","value":"v-26327ddc3e"},{"name":"GARDEN_MODULE_VERSION","value":"v-26327ddc3e"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"ecom-backend\",\"name\":\"ecom-backend\",\"type\":\"build\",\"version\":\"v-26327ddc3e\"}]"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"ecom-backend:v-26327ddc3e","imagePullPolicy":"IfNotPresent","name":"ecom-backend","resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false}}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: ecom-backend
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: ecom-backend
            service: ecom-backend
        spec:
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 1
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:12:56.770Z] Building ecom-api:v-581f44819b...

[2021-01-26T03:12:56.786Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t ecom-api:v-581f44819b --build-arg GARDEN_MODULE_VERSION=v-581f44819b --file /home/kriley/code/ecom/.garden/build/ecom-api/Dockerfile /home/kriley/code/ecom/.garden/build/ecom-api" failed with code 1:

The command '/bin/sh -c CGO_ENABLED=0 go test -v' returned a non-zero code: 1

Here's the full output:

Sending build context to Docker daemon   5.12kB
Step 1/18 : FROM golang:1.14.2-alpine as build_base
 ---> dda4232b2bd5
Step 2/18 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> a092f81f67cb
Step 3/18 : WORKDIR /go/src/app
 ---> Using cache
 ---> c0cd9fe7a660
Step 4/18 : COPY go.mod .
 ---> Using cache
 ---> 56a2de98e276
Step 5/18 : COPY go.sum .
 ---> Using cache
 ---> 696f801c32fe
Step 6/18 : RUN go mod download
 ---> Using cache
 ---> 7576179b8f46
Step 7/18 : COPY . .
 ---> bc67d0df36b0
Step 8/18 : RUN CGO_ENABLED=0 go test -v
 ---> Running in 1d6b9ace1b2e
can't load package: package .: no Go files in /go/src/app
The command '/bin/sh -c CGO_ENABLED=0 go test -v' returned a non-zero code: 1

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-api


[2021-01-26T03:12:57.237Z] Syncing module sources (35840 files)... → Done (took 7.7 sec)

[2021-01-26T03:12:57.253Z] Getting build status for v-87e0b388bf...

[2021-01-26T03:12:57.376Z] Building version v-87e0b388bf...

[2021-01-26T03:12:57.515Z] Building ecom-ui:v-87e0b388bf...

[2021-01-26T03:16:54.392Z] Getting status...

[2021-01-26T03:17:08.175Z] Getting status... → Cached

[2021-01-26T03:17:08.181Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:17:19.578Z]  Processing...

[2021-01-26T03:17:19.606Z] Syncing module sources (3 files)...

[2021-01-26T03:17:19.623Z] Syncing module sources (35840 files)...

[2021-01-26T03:17:19.816Z] Syncing module sources (3 files)...

[2021-01-26T03:17:20.141Z] Getting build status for v-0acb088676...

[2021-01-26T03:17:20.151Z] Getting build status for v-0acb088676... → Done (took 0 sec)

[2021-01-26T03:17:20.185Z] Syncing module sources (3 files)... → Done (took 0.4 sec)

[2021-01-26T03:17:20.201Z] Getting build status for v-26327ddc3e...

[2021-01-26T03:17:20.244Z] Syncing module sources (3 files)... → Done (took 0.6 sec)

[2021-01-26T03:17:20.260Z] Getting build status for v-9756d5d7ed...

[2021-01-26T03:17:22.199Z] Building version v-9756d5d7ed...

[2021-01-26T03:17:22.210Z] Getting build status for v-26327ddc3e... → Done (took 2 sec)

[2021-01-26T03:17:22.411Z] Building ecom-api:v-9756d5d7ed...

[2021-01-26T03:17:22.527Z] Deploying version v-0acb088676...

[2021-01-26T03:17:22.672Z] Deploying version v-26327ddc3e...

[2021-01-26T03:17:24.712Z] Waiting for resources to be ready...

[2021-01-26T03:17:24.845Z] Waiting for resources to be ready...

[2021-01-26T03:17:26.769Z] Deploying version v-26327ddc3e...

[2021-01-26T03:17:26.793Z] Error deploying ecom-backend: CrashLoopBackOff - back-off 5m0s restarting failed container=ecom-backend pod=ecom-backend-7c75b7fd8d-wltp7_ecom-default(299aa0d5-28f6-42d2-95a8-9b79dbbf304b)

━━━ Events ━━━
Deployment ecom-backend: ScalingReplicaSet - Scaled up replica set ecom-backend-7c75b7fd8d to 1
Pod ecom-backend-7c75b7fd8d-wltp7: Scheduled - Successfully assigned ecom-default/ecom-backend-7c75b7fd8d-wltp7 to minikube
Pod ecom-backend-7c75b7fd8d-wltp7: Pulled - Container image "ecom-backend:v-26327ddc3e" already present on machine
Pod ecom-backend-7c75b7fd8d-wltp7: Created - Created container ecom-backend
Pod ecom-backend-7c75b7fd8d-wltp7: Started - Started container ecom-backend
Pod ecom-backend-7c75b7fd8d-wltp7: BackOff - Back-off restarting failed container

━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/ecom-backend

****** ecom-backend-7c75b7fd8d-wltp7 ******
------ ecom-backend ------Go Backend Server


Error Details:

serviceName: ecom-backend
status:
  state: unhealthy
  lastMessage: >-
    CrashLoopBackOff - back-off 5m0s restarting failed container=ecom-backend
    pod=ecom-backend-7c75b7fd8d-wltp7_ecom-default(299aa0d5-28f6-42d2-95a8-9b79dbbf304b)
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment ecom-backend:\e[39m \e[37mScalingReplicaSet - Scaled up replica set ecom-backend-7c75b7fd8d to 1\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mScheduled - Successfully assigned ecom-default/ecom-backend-7c75b7fd8d-wltp7 to minikube\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mPulled - Container image \"ecom-backend:v-26327ddc3e\" already present on machine\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mCreated - Created container ecom-backend\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mStarted - Started container ecom-backend\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[33mBackOff - Back-off restarting failed container\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/ecom-backend\e[39m\n\e[94m\e[39m\n\e[94m****** ecom-backend-7c75b7fd8d-wltp7 ******\e[39m\n\e[94m\e[39m\e[90m------ ecom-backend ------\e[39mGo Backend Server\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: ecom-backend
      namespace: ecom-default
      uid: 6099f5ed-c7b7-4ff1-9e48-4f2afd3dd6a8
      resourceVersion: '7798'
      generation: 1
      creationTimestamp: '2021-01-26T03:10:57Z'
      labels:
        module: ecom-backend
        service: ecom-backend
      annotations:
        deployment.kubernetes.io/revision: '1'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: 2eb68d953e9c71de56130fa8244ab37248f341ad0d3061ae26c507986aa56ad8
        garden.io/version: v-26327ddc3e
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"2eb68d953e9c71de56130fa8244ab37248f341ad0d3061ae26c507986aa56ad8","garden.io/version":"v-26327ddc3e"},"labels":{"module":"ecom-backend","service":"ecom-backend"},"name":"ecom-backend","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"ecom-backend"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"ecom-backend","service":"ecom-backend"}},"spec":{"containers":[{"env":[{"name":"GARDEN_VERSION","value":"v-26327ddc3e"},{"name":"GARDEN_MODULE_VERSION","value":"v-26327ddc3e"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"ecom-backend\",\"name\":\"ecom-backend\",\"type\":\"build\",\"version\":\"v-26327ddc3e\"}]"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"ecom-backend:v-26327ddc3e","imagePullPolicy":"IfNotPresent","name":"ecom-backend","resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false}}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: ecom-backend
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: ecom-backend
            service: ecom-backend
        spec:
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 1
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:17:26.902Z] Deployment/db: Readiness probe failed: psql: error: FATAL:  role "ecomuser" does not exist


[2021-01-26T03:17:27.451Z] Building ecom-api:v-9756d5d7ed...

[2021-01-26T03:17:27.464Z] Unable to run docker command: Command "/home/kriley/.garden/tools/docker/ab8390b39f1acf83/docker/docker build -t ecom-api:v-9756d5d7ed --build-arg GARDEN_MODULE_VERSION=v-9756d5d7ed --file /home/kriley/code/ecom/.garden/build/ecom-api/Dockerfile /home/kriley/code/ecom/.garden/build/ecom-api" failed with code 1:

The command '/bin/sh -c CGO_ENABLED=0 go test -v' returned a non-zero code: 1

Here's the full output:

Sending build context to Docker daemon   5.12kB
Step 1/18 : FROM golang:1.14.2-alpine as build_base
 ---> dda4232b2bd5
Step 2/18 : RUN apk add --no-cache git build-base
 ---> Using cache
 ---> a092f81f67cb
Step 3/18 : WORKDIR /go/src/app
 ---> Using cache
 ---> c0cd9fe7a660
Step 4/18 : COPY go.mod .
 ---> Using cache
 ---> 56a2de98e276
Step 5/18 : COPY go.sum .
 ---> Using cache
 ---> 696f801c32fe
Step 6/18 : RUN go mod download
 ---> Using cache
 ---> 7576179b8f46
Step 7/18 : COPY . .
 ---> 9f7b6f81cd2a
Step 8/18 : RUN CGO_ENABLED=0 go test -v
 ---> Running in 1b7150368d07
can't load package: package .: no Go files in /go/src/app
The command '/bin/sh -c CGO_ENABLED=0 go test -v' returned a non-zero code: 1

Error Details:


args: []
cwd: /home/kriley/code/ecom/.garden/build/ecom-api


[2021-01-26T03:17:29.689Z] Syncing module sources (35840 files)... → Done (took 10 sec)

[2021-01-26T03:17:29.702Z] Getting build status for v-87e0b388bf...

[2021-01-26T03:17:29.975Z] Building version v-87e0b388bf...

[2021-01-26T03:17:30.241Z] Building ecom-ui:v-87e0b388bf...

[2021-01-26T03:18:10.624Z] Building ecom-ui:v-87e0b388bf... → Done (took 40.9 sec)

[2021-01-26T03:19:30.465Z] Getting status...

[2021-01-26T03:19:33.286Z] Getting status... → Cached

[2021-01-26T03:19:33.301Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:19:44.930Z]  Processing...

[2021-01-26T03:19:44.959Z] Syncing module sources (3 files)...

[2021-01-26T03:19:44.977Z] Syncing module sources (9 files)...

[2021-01-26T03:19:45.001Z] Syncing module sources (35840 files)...

[2021-01-26T03:19:47.524Z] Syncing module sources (3 files)... → Done (took 2.6 sec)

[2021-01-26T03:19:47.544Z] Getting build status for v-26327ddc3e...

[2021-01-26T03:19:47.558Z] Getting build status for v-0acb088676...

[2021-01-26T03:19:47.578Z] Getting build status for v-0acb088676... → Done (took 0 sec)

[2021-01-26T03:19:47.591Z] Syncing module sources (9 files)... → Done (took 2.6 sec)

[2021-01-26T03:19:47.612Z] Getting build status for v-0cf035c411...

[2021-01-26T03:19:48.041Z] Getting build status for v-26327ddc3e... → Done (took 0.5 sec)

[2021-01-26T03:19:48.059Z] Building version v-0cf035c411...

[2021-01-26T03:19:48.202Z] Deploying version v-0acb088676...

[2021-01-26T03:19:48.321Z] Building ecom-api:v-0cf035c411...

[2021-01-26T03:19:48.432Z] Deploying version v-26327ddc3e...

[2021-01-26T03:19:50.920Z] Waiting for resources to be ready...

[2021-01-26T03:19:50.931Z] Waiting for resources to be ready...

[2021-01-26T03:19:53.184Z] Deployment/db: Readiness probe failed: psql: error: FATAL:  role "ecomuser" does not exist


[2021-01-26T03:19:53.205Z] Deploying version v-26327ddc3e...

[2021-01-26T03:19:53.243Z] Error deploying ecom-backend: CrashLoopBackOff - back-off 5m0s restarting failed container=ecom-backend pod=ecom-backend-7c75b7fd8d-wltp7_ecom-default(299aa0d5-28f6-42d2-95a8-9b79dbbf304b)

━━━ Events ━━━
Deployment ecom-backend: ScalingReplicaSet - Scaled up replica set ecom-backend-7c75b7fd8d to 1
Pod ecom-backend-7c75b7fd8d-wltp7: Scheduled - Successfully assigned ecom-default/ecom-backend-7c75b7fd8d-wltp7 to minikube
Pod ecom-backend-7c75b7fd8d-wltp7: Pulled - Container image "ecom-backend:v-26327ddc3e" already present on machine
Pod ecom-backend-7c75b7fd8d-wltp7: Created - Created container ecom-backend
Pod ecom-backend-7c75b7fd8d-wltp7: Started - Started container ecom-backend
Pod ecom-backend-7c75b7fd8d-wltp7: BackOff - Back-off restarting failed container

━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/ecom-backend

****** ecom-backend-7c75b7fd8d-wltp7 ******
------ ecom-backend ------Go Backend Server


Error Details:

serviceName: ecom-backend
status:
  state: unhealthy
  lastMessage: >-
    CrashLoopBackOff - back-off 5m0s restarting failed container=ecom-backend
    pod=ecom-backend-7c75b7fd8d-wltp7_ecom-default(299aa0d5-28f6-42d2-95a8-9b79dbbf304b)
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment ecom-backend:\e[39m \e[37mScalingReplicaSet - Scaled up replica set ecom-backend-7c75b7fd8d to 1\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mScheduled - Successfully assigned ecom-default/ecom-backend-7c75b7fd8d-wltp7 to minikube\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mPulled - Container image \"ecom-backend:v-26327ddc3e\" already present on machine\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mCreated - Created container ecom-backend\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[37mStarted - Started container ecom-backend\e[39m\n\e[94mPod ecom-backend-7c75b7fd8d-wltp7:\e[39m \e[33mBackOff - Back-off restarting failed container\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/ecom-backend\e[39m\n\e[94m\e[39m\n\e[94m****** ecom-backend-7c75b7fd8d-wltp7 ******\e[39m\n\e[94m\e[39m\e[90m------ ecom-backend ------\e[39mGo Backend Server\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: ecom-backend
      namespace: ecom-default
      uid: 6099f5ed-c7b7-4ff1-9e48-4f2afd3dd6a8
      resourceVersion: '7798'
      generation: 1
      creationTimestamp: '2021-01-26T03:10:57Z'
      labels:
        module: ecom-backend
        service: ecom-backend
      annotations:
        deployment.kubernetes.io/revision: '1'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: 2eb68d953e9c71de56130fa8244ab37248f341ad0d3061ae26c507986aa56ad8
        garden.io/version: v-26327ddc3e
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"2eb68d953e9c71de56130fa8244ab37248f341ad0d3061ae26c507986aa56ad8","garden.io/version":"v-26327ddc3e"},"labels":{"module":"ecom-backend","service":"ecom-backend"},"name":"ecom-backend","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"ecom-backend"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"ecom-backend","service":"ecom-backend"}},"spec":{"containers":[{"env":[{"name":"GARDEN_VERSION","value":"v-26327ddc3e"},{"name":"GARDEN_MODULE_VERSION","value":"v-26327ddc3e"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"ecom-backend\",\"name\":\"ecom-backend\",\"type\":\"build\",\"version\":\"v-26327ddc3e\"}]"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"ecom-backend:v-26327ddc3e","imagePullPolicy":"IfNotPresent","name":"ecom-backend","resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false}}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: ecom-backend
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: ecom-backend
            service: ecom-backend
        spec:
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 1
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:19:54.929Z] Syncing module sources (35840 files)... → Done (took 9.9 sec)

[2021-01-26T03:19:54.948Z] Getting build status for v-87e0b388bf...

[2021-01-26T03:19:55.258Z] Getting build status for v-87e0b388bf... → Done (took 0.3 sec)

[2021-01-26T03:20:50.238Z] Building ecom-api:v-0cf035c411... → Done (took 62.6 sec)

[2021-01-26T03:20:50.278Z] Deploying version v-0cf035c411...

[2021-01-26T03:20:54.758Z] Waiting for resources to be ready...

[2021-01-26T03:20:56.804Z] Deployment/ecom-api: Created container ecom-api

[2021-01-26T03:20:59.337Z] Resources ready

[2021-01-26T03:20:59.423Z] Deploying version v-0cf035c411... → Done (took 9.2 sec)

[2021-01-26T03:20:59.437Z] → Ingress: http://ecom.192.168.49.2.nip.io/graphql

[2021-01-26T03:20:59.467Z] → Forward: http://127.10.0.2:35623 → ecom-api:80 (http)

[2021-01-26T03:20:59.494Z] Deploying version v-87e0b388bf...

[2021-01-26T03:21:01.686Z] Deploying version v-0acb088676...

[2021-01-26T03:21:01.723Z] Error deploying db: ProgressDeadlineExceeded - ReplicaSet "db-84f8b4cdc5" has timed out progressing.

━━━ Events ━━━
Deployment db: ScalingReplicaSet - Scaled up replica set db-84f8b4cdc5 to 1
Pod db-84f8b4cdc5-cggc5: Scheduled - Successfully assigned ecom-default/db-84f8b4cdc5-cggc5 to minikube
Pod db-84f8b4cdc5-cggc5: Pulled - Container image "postgres:12-alpine" already present on machine
Pod db-84f8b4cdc5-cggc5: Created - Created container db
Pod db-84f8b4cdc5-cggc5: Started - Started container db
Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: FATAL:  the database system is starting up

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: FATAL:  role "ecomuser" does not exist


━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/db

****** db-84f8b4cdc5-cggc5 ******
------ db ------2021-01-26 03:20:32.307 UTC [332] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:33.382 UTC [340] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:34.294 UTC [347] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:35.323 UTC [354] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:36.303 UTC [361] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:37.652 UTC [368] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:38.386 UTC [375] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:39.310 UTC [383] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:40.311 UTC [391] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:41.342 UTC [398] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:42.330 UTC [405] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:43.312 UTC [412] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:44.298 UTC [419] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:45.317 UTC [427] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:46.326 UTC [434] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:47.326 UTC [441] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:48.301 UTC [449] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:49.311 UTC [456] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:50.336 UTC [463] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:51.344 UTC [471] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:52.323 UTC [478] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:53.312 UTC [487] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:54.387 UTC [494] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:55.311 UTC [501] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:56.369 UTC [509] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:57.346 UTC [516] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:58.323 UTC [523] FATAL:  role "ecomuser" does not exist
2021-01-26 03:20:59.329 UTC [530] FATAL:  role "ecomuser" does not exist
2021-01-26 03:21:00.310 UTC [537] FATAL:  role "ecomuser" does not exist
2021-01-26 03:21:01.303 UTC [545] FATAL:  role "ecomuser" does not exist


Error Details:

serviceName: db
status:
  state: unhealthy
  lastMessage: >-
    ProgressDeadlineExceeded - ReplicaSet "db-84f8b4cdc5" has timed out
    progressing.
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment db:\e[39m \e[37mScalingReplicaSet - Scaled up replica set db-84f8b4cdc5 to 1\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mScheduled - Successfully assigned ecom-default/db-84f8b4cdc5-cggc5 to minikube\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mPulled - Container image \"postgres:12-alpine\" already present on machine\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mCreated - Created container db\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mStarted - Started container db\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: could not connect to server: No such file or directory\e[39m\n\e[33m\tIs the server running locally and accepting\e[39m\n\e[33m\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: FATAL:  the database system is starting up\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: server closed the connection unexpectedly\e[39m\n\e[33m\tThis probably means the server terminated abnormally\e[39m\n\e[33m\tbefore or while processing the request.\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: FATAL:  role \"ecomuser\" does not exist\e[39m\n\e[33m\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/db\e[39m\n\e[94m\e[39m\n\e[94m****** db-84f8b4cdc5-cggc5 ******\e[39m\n\e[94m\e[39m\e[90m------ db ------\e[39m2021-01-26 03:20:32.307 UTC [332] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:33.382 UTC [340] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:34.294 UTC [347] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:35.323 UTC [354] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:36.303 UTC [361] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:37.652 UTC [368] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:38.386 UTC [375] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:39.310 UTC [383] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:40.311 UTC [391] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:41.342 UTC [398] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:42.330 UTC [405] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:43.312 UTC [412] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:44.298 UTC [419] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:45.317 UTC [427] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:46.326 UTC [434] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:47.326 UTC [441] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:48.301 UTC [449] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:49.311 UTC [456] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:50.336 UTC [463] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:51.344 UTC [471] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:52.323 UTC [478] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:53.312 UTC [487] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:54.387 UTC [494] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:55.311 UTC [501] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:56.369 UTC [509] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:57.346 UTC [516] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:58.323 UTC [523] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:20:59.329 UTC [530] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:21:00.310 UTC [537] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:21:01.303 UTC [545] FATAL:  role \"ecomuser\" does not exist\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: db
      namespace: ecom-default
      uid: afa2efda-ffde-419a-9b15-3f26e90fa0fa
      resourceVersion: '8394'
      generation: 1
      creationTimestamp: '2021-01-26T03:10:55Z'
      labels:
        module: postgres
        service: db
      annotations:
        deployment.kubernetes.io/revision: '1'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: e22314585a01f53729003b0490f5f8ebb049fe0fa7bb06f7328d021a6de6cb03
        garden.io/version: v-0acb088676
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"e22314585a01f53729003b0490f5f8ebb049fe0fa7bb06f7328d021a6de6cb03","garden.io/version":"v-0acb088676"},"labels":{"module":"postgres","service":"db"},"name":"db","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"db"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"postgres","service":"db"}},"spec":{"containers":[{"env":[{"name":"GARDEN_VERSION","value":"v-0acb088676"},{"name":"GARDEN_MODULE_VERSION","value":"v-0acb088676"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"postgres\",\"name\":\"postgres\",\"type\":\"build\",\"version\":\"v-0acb088676\"}]"},{"name":"POSTGRES_DATABASE","value":"ecom"},{"name":"POSTGRES_USERNAME","value":"ecomuser"},{"name":"POSTGRES_PASSWORD","value":"ecompass"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"postgres:12-alpine","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["psql","-w","-U","ecomuser","-d","ecom","-c","SELECT
          1"]},"failureThreshold":3,"initialDelaySeconds":90,"periodSeconds":5,"successThreshold":1,"timeoutSeconds":3},"name":"db","ports":[{"containerPort":5432,"name":"db","protocol":"TCP"}],"readinessProbe":{"exec":{"command":["psql","-w","-U","ecomuser","-d","ecom","-c","SELECT
          1"]},"failureThreshold":90,"initialDelaySeconds":2,"periodSeconds":1,"successThreshold":2,"timeoutSeconds":3},"resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false},"volumeMounts":[{"mountPath":"/db-data","name":"data"}]}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5,"volumes":[{"emptyDir":{},"name":"data"}]}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: db
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: postgres
            service: db
        spec:
          volumes: []
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 1
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:21:06.070Z] Waiting for resources to be ready...

[2021-01-26T03:21:08.144Z] Deployment/ecom-ui: Started container ecom-ui

[2021-01-26T03:21:10.744Z] Deployment/ecom-ui: Readiness probe failed: Get "http://172.17.0.8:8080/": dial tcp 172.17.0.8:8080: connect: connection refused

[2021-01-26T03:21:13.813Z] Deploying version v-87e0b388bf...

[2021-01-26T03:21:13.842Z] Error deploying ecom-ui: CrashLoopBackOff - back-off 10s restarting failed container=ecom-ui pod=ecom-ui-5757c78768-58m94_ecom-default(7deb508f-10ee-43e3-b887-5505a1ed05a6)

━━━ Events ━━━
Deployment ecom-ui: ScalingReplicaSet - Scaled up replica set ecom-ui-5757c78768 to 1
Pod ecom-ui-5757c78768-58m94: Scheduled - Successfully assigned ecom-default/ecom-ui-5757c78768-58m94 to minikube
Pod ecom-ui-5757c78768-58m94: Pulled - Container image "ecom-ui:v-87e0b388bf" already present on machine
Pod ecom-ui-5757c78768-58m94: Created - Created container ecom-ui
Pod ecom-ui-5757c78768-58m94: Started - Started container ecom-ui
Pod ecom-ui-5757c78768-58m94: Unhealthy - Readiness probe failed: Get "http://172.17.0.8:8080/": dial tcp 172.17.0.8:8080: connect: connection refused
Pod ecom-ui-5757c78768-58m94: BackOff - Back-off restarting failed container

━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/ecom-ui

****** ecom-ui-5757c78768-58m94 ******
------ ecom-ui ------npm ERR! missing script: serve

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2021-01-26T03_21_11_858Z-debug.log


Error Details:

serviceName: ecom-ui
status:
  state: unhealthy
  lastMessage: >-
    CrashLoopBackOff - back-off 10s restarting failed container=ecom-ui
    pod=ecom-ui-5757c78768-58m94_ecom-default(7deb508f-10ee-43e3-b887-5505a1ed05a6)
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment ecom-ui:\e[39m \e[37mScalingReplicaSet - Scaled up replica set ecom-ui-5757c78768 to 1\e[39m\n\e[94mPod ecom-ui-5757c78768-58m94:\e[39m \e[37mScheduled - Successfully assigned ecom-default/ecom-ui-5757c78768-58m94 to minikube\e[39m\n\e[94mPod ecom-ui-5757c78768-58m94:\e[39m \e[37mPulled - Container image \"ecom-ui:v-87e0b388bf\" already present on machine\e[39m\n\e[94mPod ecom-ui-5757c78768-58m94:\e[39m \e[37mCreated - Created container ecom-ui\e[39m\n\e[94mPod ecom-ui-5757c78768-58m94:\e[39m \e[37mStarted - Started container ecom-ui\e[39m\n\e[94mPod ecom-ui-5757c78768-58m94:\e[39m \e[33mUnhealthy - Readiness probe failed: Get \"http://172.17.0.8:8080/\": dial tcp 172.17.0.8:8080: connect: connection refused\e[39m\n\e[94mPod ecom-ui-5757c78768-58m94:\e[39m \e[33mBackOff - Back-off restarting failed container\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/ecom-ui\e[39m\n\e[94m\e[39m\n\e[94m****** ecom-ui-5757c78768-58m94 ******\e[39m\n\e[94m\e[39m\e[90m------ ecom-ui ------\e[39mnpm ERR! missing script: serve\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /root/.npm/_logs/2021-01-26T03_21_11_858Z-debug.log\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: ecom-ui
      namespace: ecom-default
      uid: 669b334d-e3b8-4ba9-9651-00f6dda9edb1
      resourceVersion: '8431'
      generation: 1
      creationTimestamp: '2021-01-26T03:21:04Z'
      labels:
        module: ecom-ui
        service: ecom-ui
      annotations:
        deployment.kubernetes.io/revision: '1'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: ae158332714d1ef89f1c03dbefa0a45d4ea62a0ed57d1f4a6f2d1a68132d568a
        garden.io/version: v-87e0b388bf
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"ae158332714d1ef89f1c03dbefa0a45d4ea62a0ed57d1f4a6f2d1a68132d568a","garden.io/version":"v-87e0b388bf"},"labels":{"module":"ecom-ui","service":"ecom-ui"},"name":"ecom-ui","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"ecom-ui"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"ecom-ui","service":"ecom-ui"}},"spec":{"containers":[{"args":["npm","run","serve"],"env":[{"name":"GARDEN_VERSION","value":"v-87e0b388bf"},{"name":"GARDEN_MODULE_VERSION","value":"v-87e0b388bf"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"ecom-ui\",\"name\":\"ecom-ui\",\"type\":\"build\",\"version\":\"v-87e0b388bf\"},{\"moduleName\":\"ecom-api\",\"name\":\"ecom-api\",\"type\":\"service\",\"version\":\"v-0cf035c411\"}]"},{"name":"HOSTNAME","value":"ecom.local.app.garden"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"ecom-ui:v-87e0b388bf","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/","port":8080,"scheme":"HTTP"},"initialDelaySeconds":90,"periodSeconds":5,"successThreshold":1,"timeoutSeconds":3},"name":"ecom-ui","ports":[{"containerPort":8080,"name":"http","protocol":"TCP"}],"readinessProbe":{"failureThreshold":90,"httpGet":{"path":"/","port":8080,"scheme":"HTTP"},"initialDelaySeconds":2,"periodSeconds":1,"successThreshold":2,"timeoutSeconds":3},"resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false}}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: ecom-ui
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: ecom-ui
            service: ecom-ui
        spec:
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 1
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:21:13.863Z]  Processing...

[2021-01-26T03:21:13.910Z] Waiting for code changes...

[2021-01-26T03:21:19.973Z] Waiting for code changes...

[2021-01-26T03:23:11.954Z] Getting status...

[2021-01-26T03:23:13.444Z] Getting status... → Cached

[2021-01-26T03:23:13.464Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:23:27.425Z] Large number of files (35841) found in module ecom-ui. You may need to configure file exclusions.
See https://docs.garden.io/using-garden/configuration-overview#including-excluding-files-and-directories for details.
Run garden util hide-warning ecom-filecount-ecom-ui to disable this warning.

[2021-01-26T03:23:27.544Z] Module configuration changed, reloading...

[2021-01-26T03:23:28.112Z] Garden dashboard running at http://localhost:9777

[2021-01-26T03:23:28.134Z] Getting status...

[2021-01-26T03:23:31.925Z] Getting status... → Cached

[2021-01-26T03:23:31.944Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:23:52.526Z]  Processing...

[2021-01-26T03:23:52.562Z] Syncing module sources (9 files)...

[2021-01-26T03:23:52.599Z] Syncing module sources (35840 files)...

[2021-01-26T03:23:52.763Z] Syncing module sources (5 files)...

[2021-01-26T03:23:55.083Z] Syncing module sources (5 files)... → Done (took 2.3 sec)

[2021-01-26T03:23:55.108Z] Getting build status for v-1d035bde45...

[2021-01-26T03:23:55.130Z] Getting build status for v-0acb088676...

[2021-01-26T03:23:55.155Z] Getting build status for v-0acb088676... → Done (took 0 sec)

[2021-01-26T03:23:55.174Z] Syncing module sources (9 files)... → Done (took 2.6 sec)

[2021-01-26T03:23:55.200Z] Getting build status for v-0cf035c411...

[2021-01-26T03:23:55.413Z] Building version v-1d035bde45...

[2021-01-26T03:23:55.643Z] Getting build status for v-0cf035c411... → Done (took 0.4 sec)

[2021-01-26T03:23:55.676Z] Deploying version v-0cf035c411...

[2021-01-26T03:23:55.703Z] Deploying version v-0cf035c411... → Already deployed

[2021-01-26T03:23:55.739Z] → Ingress: http://ecom.192.168.49.2.nip.io/graphql

[2021-01-26T03:23:55.766Z] → Forward: http://127.10.0.2:35623 → ecom-api:80 (http)

[2021-01-26T03:23:55.793Z] Building ecom-backend:v-1d035bde45...

[2021-01-26T03:23:55.945Z] Deploying version v-0acb088676...

[2021-01-26T03:23:57.131Z] Building ecom-backend:v-1d035bde45... → Done (took 2 sec)

[2021-01-26T03:23:57.171Z] Deploying version v-1d035bde45...

[2021-01-26T03:23:58.111Z] Waiting for resources to be ready...

[2021-01-26T03:23:58.799Z] Waiting for resources to be ready...

[2021-01-26T03:24:00.187Z] Deploying version v-0acb088676...

[2021-01-26T03:24:00.226Z] Error deploying db: ProgressDeadlineExceeded - ReplicaSet "db-84f8b4cdc5" has timed out progressing.

━━━ Events ━━━
Deployment db: ScalingReplicaSet - Scaled up replica set db-84f8b4cdc5 to 1
Pod db-84f8b4cdc5-cggc5: Scheduled - Successfully assigned ecom-default/db-84f8b4cdc5-cggc5 to minikube
Pod db-84f8b4cdc5-cggc5: Pulled - Container image "postgres:12-alpine" already present on machine
Pod db-84f8b4cdc5-cggc5: Created - Created container db
Pod db-84f8b4cdc5-cggc5: Started - Started container db
Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: FATAL:  the database system is starting up

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: FATAL:  role "ecomuser" does not exist


━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/db

****** db-84f8b4cdc5-cggc5 ******
------ db ------2021-01-26 03:22:57.308 UTC [649] FATAL:  role "ecomuser" does not exist
2021-01-26 03:22:58.338 UTC [656] FATAL:  role "ecomuser" does not exist
2021-01-26 03:22:59.337 UTC [663] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:00.314 UTC [670] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:01.313 UTC [677] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:02.303 UTC [684] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:03.345 UTC [691] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:04.356 UTC [698] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:05.340 UTC [705] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:06.328 UTC [713] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:07.312 UTC [721] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:08.378 UTC [728] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:08.759 UTC [736] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:09.350 UTC [744] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:10.343 UTC [751] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:11.359 UTC [759] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:12.313 UTC [766] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:13.350 UTC [774] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:13.727 UTC [781] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:14.299 UTC [788] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:15.310 UTC [795] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:16.309 UTC [802] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:17.309 UTC [809] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:18.304 UTC [816] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:18.718 UTC [824] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:18.830 UTC [1] LOG:  received fast shutdown request
2021-01-26 03:23:18.852 UTC [1] LOG:  aborting any active transactions
2021-01-26 03:23:18.852 UTC [1] LOG:  background worker "logical replication launcher" (PID 59) exited with exit code 1
2021-01-26 03:23:18.853 UTC [54] LOG:  shutting down
2021-01-26 03:23:19.013 UTC [1] LOG:  database system is shut down


Error Details:

serviceName: db
status:
  state: unhealthy
  lastMessage: >-
    ProgressDeadlineExceeded - ReplicaSet "db-84f8b4cdc5" has timed out
    progressing.
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment db:\e[39m \e[37mScalingReplicaSet - Scaled up replica set db-84f8b4cdc5 to 1\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mScheduled - Successfully assigned ecom-default/db-84f8b4cdc5-cggc5 to minikube\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mPulled - Container image \"postgres:12-alpine\" already present on machine\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mCreated - Created container db\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mStarted - Started container db\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: could not connect to server: No such file or directory\e[39m\n\e[33m\tIs the server running locally and accepting\e[39m\n\e[33m\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: FATAL:  the database system is starting up\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: server closed the connection unexpectedly\e[39m\n\e[33m\tThis probably means the server terminated abnormally\e[39m\n\e[33m\tbefore or while processing the request.\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: FATAL:  role \"ecomuser\" does not exist\e[39m\n\e[33m\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/db\e[39m\n\e[94m\e[39m\n\e[94m****** db-84f8b4cdc5-cggc5 ******\e[39m\n\e[94m\e[39m\e[90m------ db ------\e[39m2021-01-26 03:22:57.308 UTC [649] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:22:58.338 UTC [656] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:22:59.337 UTC [663] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:00.314 UTC [670] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:01.313 UTC [677] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:02.303 UTC [684] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:03.345 UTC [691] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:04.356 UTC [698] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:05.340 UTC [705] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:06.328 UTC [713] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:07.312 UTC [721] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:08.378 UTC [728] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:08.759 UTC [736] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:09.350 UTC [744] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:10.343 UTC [751] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:11.359 UTC [759] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:12.313 UTC [766] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:13.350 UTC [774] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:13.727 UTC [781] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:14.299 UTC [788] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:15.310 UTC [795] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:16.309 UTC [802] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:17.309 UTC [809] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:18.304 UTC [816] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:18.718 UTC [824] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:18.830 UTC [1] LOG:  received fast shutdown request\n2021-01-26 03:23:18.852 UTC [1] LOG:  aborting any active transactions\n2021-01-26 03:23:18.852 UTC [1] LOG:  background worker \"logical replication launcher\" (PID 59) exited with exit code 1\n2021-01-26 03:23:18.853 UTC [54] LOG:  shutting down\n2021-01-26 03:23:19.013 UTC [1] LOG:  database system is shut down\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: db
      namespace: ecom-default
      uid: afa2efda-ffde-419a-9b15-3f26e90fa0fa
      resourceVersion: '8394'
      generation: 1
      creationTimestamp: '2021-01-26T03:10:55Z'
      labels:
        module: postgres
        service: db
      annotations:
        deployment.kubernetes.io/revision: '1'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: e22314585a01f53729003b0490f5f8ebb049fe0fa7bb06f7328d021a6de6cb03
        garden.io/version: v-0acb088676
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"e22314585a01f53729003b0490f5f8ebb049fe0fa7bb06f7328d021a6de6cb03","garden.io/version":"v-0acb088676"},"labels":{"module":"postgres","service":"db"},"name":"db","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"db"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"postgres","service":"db"}},"spec":{"containers":[{"env":[{"name":"GARDEN_VERSION","value":"v-0acb088676"},{"name":"GARDEN_MODULE_VERSION","value":"v-0acb088676"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"postgres\",\"name\":\"postgres\",\"type\":\"build\",\"version\":\"v-0acb088676\"}]"},{"name":"POSTGRES_DATABASE","value":"ecom"},{"name":"POSTGRES_USERNAME","value":"ecomuser"},{"name":"POSTGRES_PASSWORD","value":"ecompass"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"postgres:12-alpine","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["psql","-w","-U","ecomuser","-d","ecom","-c","SELECT
          1"]},"failureThreshold":3,"initialDelaySeconds":90,"periodSeconds":5,"successThreshold":1,"timeoutSeconds":3},"name":"db","ports":[{"containerPort":5432,"name":"db","protocol":"TCP"}],"readinessProbe":{"exec":{"command":["psql","-w","-U","ecomuser","-d","ecom","-c","SELECT
          1"]},"failureThreshold":90,"initialDelaySeconds":2,"periodSeconds":1,"successThreshold":2,"timeoutSeconds":3},"resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false},"volumeMounts":[{"mountPath":"/db-data","name":"data"}]}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5,"volumes":[{"emptyDir":{},"name":"data"}]}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: db
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: postgres
            service: db
        spec:
          volumes: []
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 1
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:24:00.864Z] Deployment/ecom-backend: Created container ecom-backend

[2021-01-26T03:24:01.357Z] Syncing module sources (35840 files)... → Done (took 8.8 sec)

[2021-01-26T03:24:01.383Z] Getting build status for v-87e0b388bf...

[2021-01-26T03:24:01.562Z] Getting build status for v-87e0b388bf... → Done (took 0.2 sec)

[2021-01-26T03:24:01.588Z] Deploying version v-87e0b388bf...

[2021-01-26T03:24:03.774Z] Deployment/ecom-backend: Started container ecom-backend

[2021-01-26T03:24:05.274Z] Waiting for resources to be ready...

[2021-01-26T03:24:06.871Z] Deploying version v-1d035bde45...

[2021-01-26T03:24:06.909Z] Error deploying ecom-backend: CrashLoopBackOff - back-off 10s restarting failed container=ecom-backend pod=ecom-backend-7d9fb5f45b-gj2sg_ecom-default(5852747d-d199-4fbc-9561-c28708f1371c)

━━━ Events ━━━
Deployment ecom-backend: ScalingReplicaSet - Scaled up replica set ecom-backend-7c75b7fd8d to 1
Deployment ecom-backend: ScalingReplicaSet - Scaled up replica set ecom-backend-7d9fb5f45b to 1
Deployment ecom-backend: ScalingReplicaSet - Scaled down replica set ecom-backend-7c75b7fd8d to 0
Pod ecom-backend-7d9fb5f45b-gj2sg: Scheduled - Successfully assigned ecom-default/ecom-backend-7d9fb5f45b-gj2sg to minikube
Pod ecom-backend-7d9fb5f45b-gj2sg: Pulled - Container image "ecom-backend:v-1d035bde45" already present on machine
Pod ecom-backend-7d9fb5f45b-gj2sg: Created - Created container ecom-backend
Pod ecom-backend-7d9fb5f45b-gj2sg: Started - Started container ecom-backend
Pod ecom-backend-7d9fb5f45b-gj2sg: BackOff - Back-off restarting failed container

━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/ecom-backend

****** ecom-backend-7d9fb5f45b-gj2sg ******
------ ecom-backend ------Go Backend Server


Error Details:

serviceName: ecom-backend
status:
  state: unhealthy
  lastMessage: >-
    CrashLoopBackOff - back-off 10s restarting failed container=ecom-backend
    pod=ecom-backend-7d9fb5f45b-gj2sg_ecom-default(5852747d-d199-4fbc-9561-c28708f1371c)
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment ecom-backend:\e[39m \e[37mScalingReplicaSet - Scaled up replica set ecom-backend-7c75b7fd8d to 1\e[39m\n\e[94mDeployment ecom-backend:\e[39m \e[37mScalingReplicaSet - Scaled up replica set ecom-backend-7d9fb5f45b to 1\e[39m\n\e[94mDeployment ecom-backend:\e[39m \e[37mScalingReplicaSet - Scaled down replica set ecom-backend-7c75b7fd8d to 0\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[37mScheduled - Successfully assigned ecom-default/ecom-backend-7d9fb5f45b-gj2sg to minikube\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[37mPulled - Container image \"ecom-backend:v-1d035bde45\" already present on machine\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[37mCreated - Created container ecom-backend\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[37mStarted - Started container ecom-backend\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[33mBackOff - Back-off restarting failed container\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/ecom-backend\e[39m\n\e[94m\e[39m\n\e[94m****** ecom-backend-7d9fb5f45b-gj2sg ******\e[39m\n\e[94m\e[39m\e[90m------ ecom-backend ------\e[39mGo Backend Server\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: ecom-backend
      namespace: ecom-default
      uid: 6099f5ed-c7b7-4ff1-9e48-4f2afd3dd6a8
      resourceVersion: '8643'
      generation: 2
      creationTimestamp: '2021-01-26T03:10:57Z'
      labels:
        module: ecom-backend
        service: ecom-backend
      annotations:
        deployment.kubernetes.io/revision: '2'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: a97e26f029a06580560d0e9ac0baa713c3fe583d754dda4cd911cf4c00b6364e
        garden.io/version: v-1d035bde45
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"a97e26f029a06580560d0e9ac0baa713c3fe583d754dda4cd911cf4c00b6364e","garden.io/version":"v-1d035bde45"},"labels":{"module":"ecom-backend","service":"ecom-backend"},"name":"ecom-backend","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"ecom-backend"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"ecom-backend","service":"ecom-backend"}},"spec":{"containers":[{"env":[{"name":"GARDEN_VERSION","value":"v-1d035bde45"},{"name":"GARDEN_MODULE_VERSION","value":"v-1d035bde45"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"ecom-backend\",\"name\":\"ecom-backend\",\"type\":\"build\",\"version\":\"v-1d035bde45\"}]"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"ecom-backend:v-1d035bde45","imagePullPolicy":"IfNotPresent","name":"ecom-backend","resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false}}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: ecom-backend
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: ecom-backend
            service: ecom-backend
        spec:
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 2
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:24:07.362Z] Deploying version v-87e0b388bf...

[2021-01-26T03:24:07.398Z] Error deploying ecom-ui: CrashLoopBackOff - back-off 1m20s restarting failed container=ecom-ui pod=ecom-ui-5757c78768-58m94_ecom-default(7deb508f-10ee-43e3-b887-5505a1ed05a6)

━━━ Events ━━━
Deployment ecom-ui: ScalingReplicaSet - Scaled up replica set ecom-ui-5757c78768 to 1
Pod ecom-ui-5757c78768-58m94: Scheduled - Successfully assigned ecom-default/ecom-ui-5757c78768-58m94 to minikube
Pod ecom-ui-5757c78768-58m94: Pulled - Container image "ecom-ui:v-87e0b388bf" already present on machine
Pod ecom-ui-5757c78768-58m94: Created - Created container ecom-ui
Pod ecom-ui-5757c78768-58m94: Started - Started container ecom-ui
Pod ecom-ui-5757c78768-58m94: Unhealthy - Readiness probe failed: Get "http://172.17.0.8:8080/": dial tcp 172.17.0.8:8080: connect: connection refused
Pod ecom-ui-5757c78768-58m94: BackOff - Back-off restarting failed container

━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/ecom-ui

****** ecom-ui-5757c78768-58m94 ******
------ ecom-ui ------npm ERR! missing script: serve

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2021-01-26T03_22_42_169Z-debug.log


Error Details:

serviceName: ecom-ui
status:
  state: unhealthy
  lastMessage: >-
    CrashLoopBackOff - back-off 1m20s restarting failed container=ecom-ui
    pod=ecom-ui-5757c78768-58m94_ecom-default(7deb508f-10ee-43e3-b887-5505a1ed05a6)
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment ecom-ui:\e[39m \e[37mScalingReplicaSet - Scaled up replica set ecom-ui-5757c78768 to 1\e[39m\n\e[94mPod ecom-ui-5757c78768-58m94:\e[39m \e[37mScheduled - Successfully assigned ecom-default/ecom-ui-5757c78768-58m94 to minikube\e[39m\n\e[94mPod ecom-ui-5757c78768-58m94:\e[39m \e[37mPulled - Container image \"ecom-ui:v-87e0b388bf\" already present on machine\e[39m\n\e[94mPod ecom-ui-5757c78768-58m94:\e[39m \e[37mCreated - Created container ecom-ui\e[39m\n\e[94mPod ecom-ui-5757c78768-58m94:\e[39m \e[37mStarted - Started container ecom-ui\e[39m\n\e[94mPod ecom-ui-5757c78768-58m94:\e[39m \e[33mUnhealthy - Readiness probe failed: Get \"http://172.17.0.8:8080/\": dial tcp 172.17.0.8:8080: connect: connection refused\e[39m\n\e[94mPod ecom-ui-5757c78768-58m94:\e[39m \e[33mBackOff - Back-off restarting failed container\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/ecom-ui\e[39m\n\e[94m\e[39m\n\e[94m****** ecom-ui-5757c78768-58m94 ******\e[39m\n\e[94m\e[39m\e[90m------ ecom-ui ------\e[39mnpm ERR! missing script: serve\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /root/.npm/_logs/2021-01-26T03_22_42_169Z-debug.log\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: ecom-ui
      namespace: ecom-default
      uid: 669b334d-e3b8-4ba9-9651-00f6dda9edb1
      resourceVersion: '8431'
      generation: 1
      creationTimestamp: '2021-01-26T03:21:04Z'
      labels:
        module: ecom-ui
        service: ecom-ui
      annotations:
        deployment.kubernetes.io/revision: '1'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: ae158332714d1ef89f1c03dbefa0a45d4ea62a0ed57d1f4a6f2d1a68132d568a
        garden.io/version: v-87e0b388bf
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"ae158332714d1ef89f1c03dbefa0a45d4ea62a0ed57d1f4a6f2d1a68132d568a","garden.io/version":"v-87e0b388bf"},"labels":{"module":"ecom-ui","service":"ecom-ui"},"name":"ecom-ui","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"ecom-ui"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"ecom-ui","service":"ecom-ui"}},"spec":{"containers":[{"args":["npm","run","serve"],"env":[{"name":"GARDEN_VERSION","value":"v-87e0b388bf"},{"name":"GARDEN_MODULE_VERSION","value":"v-87e0b388bf"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"ecom-ui\",\"name\":\"ecom-ui\",\"type\":\"build\",\"version\":\"v-87e0b388bf\"},{\"moduleName\":\"ecom-api\",\"name\":\"ecom-api\",\"type\":\"service\",\"version\":\"v-0cf035c411\"}]"},{"name":"HOSTNAME","value":"ecom.local.app.garden"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"ecom-ui:v-87e0b388bf","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/","port":8080,"scheme":"HTTP"},"initialDelaySeconds":90,"periodSeconds":5,"successThreshold":1,"timeoutSeconds":3},"name":"ecom-ui","ports":[{"containerPort":8080,"name":"http","protocol":"TCP"}],"readinessProbe":{"failureThreshold":90,"httpGet":{"path":"/","port":8080,"scheme":"HTTP"},"initialDelaySeconds":2,"periodSeconds":1,"successThreshold":2,"timeoutSeconds":3},"resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false}}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: ecom-ui
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: ecom-ui
            service: ecom-ui
        spec:
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 1
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:24:07.426Z]  Processing...

[2021-01-26T03:24:07.488Z] Waiting for code changes...

[2021-01-26T03:24:29.907Z] Getting status...

[2021-01-26T03:24:32.106Z] Getting status... → Cached

[2021-01-26T03:24:32.139Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:24:46.001Z] Large number of files (35841) found in module ecom-ui. You may need to configure file exclusions.
See https://docs.garden.io/using-garden/configuration-overview#including-excluding-files-and-directories for details.
Run garden util hide-warning ecom-filecount-ecom-ui to disable this warning.

[2021-01-26T03:24:46.121Z] Module configuration changed, reloading...

[2021-01-26T03:24:46.637Z] Garden dashboard running at http://localhost:9777

[2021-01-26T03:24:46.667Z] Getting status...

[2021-01-26T03:24:49.813Z] Getting status... → Cached

[2021-01-26T03:24:49.852Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:25:11.061Z]  Processing...

[2021-01-26T03:25:11.122Z] Syncing module sources (9 files)...

[2021-01-26T03:25:11.184Z] Syncing module sources (35840 files)...

[2021-01-26T03:25:11.366Z] Syncing module sources (5 files)...

[2021-01-26T03:25:13.906Z] Getting build status for v-0acb088676...

[2021-01-26T03:25:13.958Z] Getting build status for v-0acb088676... → Done (took 0 sec)

[2021-01-26T03:25:14.001Z] Syncing module sources (9 files)... → Done (took 2.9 sec)

[2021-01-26T03:25:14.043Z] Getting build status for v-0cf035c411...

[2021-01-26T03:25:14.081Z] Syncing module sources (5 files)... → Done (took 2.7 sec)

[2021-01-26T03:25:14.118Z] Getting build status for v-1d035bde45...

[2021-01-26T03:25:14.733Z] Deploying version v-0acb088676...

[2021-01-26T03:25:16.262Z] Getting build status for v-0cf035c411... → Done (took 2.2 sec)

[2021-01-26T03:25:16.304Z] Deploying version v-0cf035c411...

[2021-01-26T03:25:16.338Z] Deploying version v-0cf035c411... → Already deployed

[2021-01-26T03:25:16.372Z] → Ingress: http://ecom.192.168.49.2.nip.io/graphql

[2021-01-26T03:25:16.405Z] Getting build status for v-1d035bde45... → Done (took 2.3 sec)

[2021-01-26T03:25:16.444Z] Deploying version v-1d035bde45...

[2021-01-26T03:25:16.489Z] → Forward: http://127.10.0.2:35623 → ecom-api:80 (http)

[2021-01-26T03:25:16.811Z] Waiting for resources to be ready...

[2021-01-26T03:25:18.110Z] Waiting for resources to be ready...

[2021-01-26T03:25:18.889Z] Deploying version v-0acb088676...

[2021-01-26T03:25:18.932Z] Error deploying db: ProgressDeadlineExceeded - ReplicaSet "db-84f8b4cdc5" has timed out progressing.

━━━ Events ━━━
Deployment db: ScalingReplicaSet - Scaled up replica set db-84f8b4cdc5 to 1
Pod db-84f8b4cdc5-cggc5: Scheduled - Successfully assigned ecom-default/db-84f8b4cdc5-cggc5 to minikube
Pod db-84f8b4cdc5-cggc5: Pulled - Container image "postgres:12-alpine" already present on machine
Pod db-84f8b4cdc5-cggc5: Created - Created container db
Pod db-84f8b4cdc5-cggc5: Started - Started container db
Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: FATAL:  the database system is starting up

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: FATAL:  role "ecomuser" does not exist


━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/db

****** db-84f8b4cdc5-cggc5 ******
------ db ------2021-01-26 03:22:57.308 UTC [649] FATAL:  role "ecomuser" does not exist
2021-01-26 03:22:58.338 UTC [656] FATAL:  role "ecomuser" does not exist
2021-01-26 03:22:59.337 UTC [663] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:00.314 UTC [670] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:01.313 UTC [677] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:02.303 UTC [684] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:03.345 UTC [691] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:04.356 UTC [698] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:05.340 UTC [705] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:06.328 UTC [713] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:07.312 UTC [721] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:08.378 UTC [728] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:08.759 UTC [736] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:09.350 UTC [744] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:10.343 UTC [751] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:11.359 UTC [759] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:12.313 UTC [766] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:13.350 UTC [774] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:13.727 UTC [781] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:14.299 UTC [788] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:15.310 UTC [795] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:16.309 UTC [802] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:17.309 UTC [809] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:18.304 UTC [816] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:18.718 UTC [824] FATAL:  role "ecomuser" does not exist
2021-01-26 03:23:18.830 UTC [1] LOG:  received fast shutdown request
2021-01-26 03:23:18.852 UTC [1] LOG:  aborting any active transactions
2021-01-26 03:23:18.852 UTC [1] LOG:  background worker "logical replication launcher" (PID 59) exited with exit code 1
2021-01-26 03:23:18.853 UTC [54] LOG:  shutting down
2021-01-26 03:23:19.013 UTC [1] LOG:  database system is shut down


Error Details:

serviceName: db
status:
  state: unhealthy
  lastMessage: >-
    ProgressDeadlineExceeded - ReplicaSet "db-84f8b4cdc5" has timed out
    progressing.
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment db:\e[39m \e[37mScalingReplicaSet - Scaled up replica set db-84f8b4cdc5 to 1\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mScheduled - Successfully assigned ecom-default/db-84f8b4cdc5-cggc5 to minikube\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mPulled - Container image \"postgres:12-alpine\" already present on machine\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mCreated - Created container db\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mStarted - Started container db\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: could not connect to server: No such file or directory\e[39m\n\e[33m\tIs the server running locally and accepting\e[39m\n\e[33m\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: FATAL:  the database system is starting up\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: server closed the connection unexpectedly\e[39m\n\e[33m\tThis probably means the server terminated abnormally\e[39m\n\e[33m\tbefore or while processing the request.\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: FATAL:  role \"ecomuser\" does not exist\e[39m\n\e[33m\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/db\e[39m\n\e[94m\e[39m\n\e[94m****** db-84f8b4cdc5-cggc5 ******\e[39m\n\e[94m\e[39m\e[90m------ db ------\e[39m2021-01-26 03:22:57.308 UTC [649] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:22:58.338 UTC [656] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:22:59.337 UTC [663] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:00.314 UTC [670] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:01.313 UTC [677] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:02.303 UTC [684] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:03.345 UTC [691] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:04.356 UTC [698] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:05.340 UTC [705] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:06.328 UTC [713] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:07.312 UTC [721] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:08.378 UTC [728] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:08.759 UTC [736] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:09.350 UTC [744] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:10.343 UTC [751] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:11.359 UTC [759] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:12.313 UTC [766] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:13.350 UTC [774] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:13.727 UTC [781] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:14.299 UTC [788] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:15.310 UTC [795] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:16.309 UTC [802] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:17.309 UTC [809] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:18.304 UTC [816] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:18.718 UTC [824] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:23:18.830 UTC [1] LOG:  received fast shutdown request\n2021-01-26 03:23:18.852 UTC [1] LOG:  aborting any active transactions\n2021-01-26 03:23:18.852 UTC [1] LOG:  background worker \"logical replication launcher\" (PID 59) exited with exit code 1\n2021-01-26 03:23:18.853 UTC [54] LOG:  shutting down\n2021-01-26 03:23:19.013 UTC [1] LOG:  database system is shut down\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: db
      namespace: ecom-default
      uid: afa2efda-ffde-419a-9b15-3f26e90fa0fa
      resourceVersion: '8394'
      generation: 1
      creationTimestamp: '2021-01-26T03:10:55Z'
      labels:
        module: postgres
        service: db
      annotations:
        deployment.kubernetes.io/revision: '1'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: e22314585a01f53729003b0490f5f8ebb049fe0fa7bb06f7328d021a6de6cb03
        garden.io/version: v-0acb088676
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"e22314585a01f53729003b0490f5f8ebb049fe0fa7bb06f7328d021a6de6cb03","garden.io/version":"v-0acb088676"},"labels":{"module":"postgres","service":"db"},"name":"db","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"db"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"postgres","service":"db"}},"spec":{"containers":[{"env":[{"name":"GARDEN_VERSION","value":"v-0acb088676"},{"name":"GARDEN_MODULE_VERSION","value":"v-0acb088676"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"postgres\",\"name\":\"postgres\",\"type\":\"build\",\"version\":\"v-0acb088676\"}]"},{"name":"POSTGRES_DATABASE","value":"ecom"},{"name":"POSTGRES_USERNAME","value":"ecomuser"},{"name":"POSTGRES_PASSWORD","value":"ecompass"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"postgres:12-alpine","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["psql","-w","-U","ecomuser","-d","ecom","-c","SELECT
          1"]},"failureThreshold":3,"initialDelaySeconds":90,"periodSeconds":5,"successThreshold":1,"timeoutSeconds":3},"name":"db","ports":[{"containerPort":5432,"name":"db","protocol":"TCP"}],"readinessProbe":{"exec":{"command":["psql","-w","-U","ecomuser","-d","ecom","-c","SELECT
          1"]},"failureThreshold":90,"initialDelaySeconds":2,"periodSeconds":1,"successThreshold":2,"timeoutSeconds":3},"resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false},"volumeMounts":[{"mountPath":"/db-data","name":"data"}]}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5,"volumes":[{"emptyDir":{},"name":"data"}]}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: db
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: postgres
            service: db
        spec:
          volumes: []
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 1
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:25:19.334Z] Syncing module sources (35840 files)... → Done (took 8.1 sec)

[2021-01-26T03:25:19.371Z] Getting build status for v-a6f2d7aced...

[2021-01-26T03:25:19.595Z] Building version v-a6f2d7aced...

[2021-01-26T03:25:19.861Z] Building ecom-ui:v-a6f2d7aced...

[2021-01-26T03:25:20.198Z] Deploying version v-1d035bde45...

[2021-01-26T03:25:20.252Z] Error deploying ecom-backend: CrashLoopBackOff - back-off 40s restarting failed container=ecom-backend pod=ecom-backend-7d9fb5f45b-gj2sg_ecom-default(5852747d-d199-4fbc-9561-c28708f1371c)

━━━ Events ━━━
Deployment ecom-backend: ScalingReplicaSet - Scaled up replica set ecom-backend-7c75b7fd8d to 1
Deployment ecom-backend: ScalingReplicaSet - Scaled up replica set ecom-backend-7d9fb5f45b to 1
Deployment ecom-backend: ScalingReplicaSet - Scaled down replica set ecom-backend-7c75b7fd8d to 0
Pod ecom-backend-7d9fb5f45b-gj2sg: Scheduled - Successfully assigned ecom-default/ecom-backend-7d9fb5f45b-gj2sg to minikube
Pod ecom-backend-7d9fb5f45b-gj2sg: Pulled - Container image "ecom-backend:v-1d035bde45" already present on machine
Pod ecom-backend-7d9fb5f45b-gj2sg: Created - Created container ecom-backend
Pod ecom-backend-7d9fb5f45b-gj2sg: Started - Started container ecom-backend
Pod ecom-backend-7d9fb5f45b-gj2sg: BackOff - Back-off restarting failed container

━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/ecom-backend

****** ecom-backend-7d9fb5f45b-gj2sg ******
------ ecom-backend ------Go Backend Server


Error Details:

serviceName: ecom-backend
status:
  state: unhealthy
  lastMessage: >-
    CrashLoopBackOff - back-off 40s restarting failed container=ecom-backend
    pod=ecom-backend-7d9fb5f45b-gj2sg_ecom-default(5852747d-d199-4fbc-9561-c28708f1371c)
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment ecom-backend:\e[39m \e[37mScalingReplicaSet - Scaled up replica set ecom-backend-7c75b7fd8d to 1\e[39m\n\e[94mDeployment ecom-backend:\e[39m \e[37mScalingReplicaSet - Scaled up replica set ecom-backend-7d9fb5f45b to 1\e[39m\n\e[94mDeployment ecom-backend:\e[39m \e[37mScalingReplicaSet - Scaled down replica set ecom-backend-7c75b7fd8d to 0\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[37mScheduled - Successfully assigned ecom-default/ecom-backend-7d9fb5f45b-gj2sg to minikube\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[37mPulled - Container image \"ecom-backend:v-1d035bde45\" already present on machine\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[37mCreated - Created container ecom-backend\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[37mStarted - Started container ecom-backend\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[33mBackOff - Back-off restarting failed container\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/ecom-backend\e[39m\n\e[94m\e[39m\n\e[94m****** ecom-backend-7d9fb5f45b-gj2sg ******\e[39m\n\e[94m\e[39m\e[90m------ ecom-backend ------\e[39mGo Backend Server\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: ecom-backend
      namespace: ecom-default
      uid: 6099f5ed-c7b7-4ff1-9e48-4f2afd3dd6a8
      resourceVersion: '8643'
      generation: 2
      creationTimestamp: '2021-01-26T03:10:57Z'
      labels:
        module: ecom-backend
        service: ecom-backend
      annotations:
        deployment.kubernetes.io/revision: '2'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: a97e26f029a06580560d0e9ac0baa713c3fe583d754dda4cd911cf4c00b6364e
        garden.io/version: v-1d035bde45
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"a97e26f029a06580560d0e9ac0baa713c3fe583d754dda4cd911cf4c00b6364e","garden.io/version":"v-1d035bde45"},"labels":{"module":"ecom-backend","service":"ecom-backend"},"name":"ecom-backend","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"ecom-backend"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"ecom-backend","service":"ecom-backend"}},"spec":{"containers":[{"env":[{"name":"GARDEN_VERSION","value":"v-1d035bde45"},{"name":"GARDEN_MODULE_VERSION","value":"v-1d035bde45"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"ecom-backend\",\"name\":\"ecom-backend\",\"type\":\"build\",\"version\":\"v-1d035bde45\"}]"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"ecom-backend:v-1d035bde45","imagePullPolicy":"IfNotPresent","name":"ecom-backend","resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false}}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: ecom-backend
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: ecom-backend
            service: ecom-backend
        spec:
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 2
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:25:44.329Z] Building ecom-ui:v-a6f2d7aced... → Done (took 24.9 sec)

[2021-01-26T03:25:44.386Z] Deploying version v-a6f2d7aced...

[2021-01-26T03:25:48.848Z] Waiting for resources to be ready...

[2021-01-26T03:25:51.002Z] Deployment/ecom-ui: Container image "ecom-ui:v-a6f2d7aced" already present on machine

[2021-01-26T03:25:53.792Z] Deployment/ecom-ui: Started container ecom-ui

[2021-01-26T03:25:56.872Z] Deploying version v-a6f2d7aced...

[2021-01-26T03:25:56.912Z] Error deploying ecom-ui: BackOff - Back-off restarting failed container

━━━ Events ━━━
Deployment ecom-ui: ScalingReplicaSet - Scaled up replica set ecom-ui-5757c78768 to 1
Deployment ecom-ui: ScalingReplicaSet - Scaled up replica set ecom-ui-64dd6b8cf to 1
Deployment ecom-ui: ScalingReplicaSet - Scaled down replica set ecom-ui-5757c78768 to 0
Pod ecom-ui-64dd6b8cf-v7hw9: Scheduled - Successfully assigned ecom-default/ecom-ui-64dd6b8cf-v7hw9 to minikube
Pod ecom-ui-64dd6b8cf-v7hw9: Pulled - Container image "ecom-ui:v-a6f2d7aced" already present on machine
Pod ecom-ui-64dd6b8cf-v7hw9: Created - Created container ecom-ui
Pod ecom-ui-64dd6b8cf-v7hw9: Started - Started container ecom-ui
Pod ecom-ui-64dd6b8cf-v7hw9: Unhealthy - Readiness probe failed: Get "http://172.17.0.6:8080/": dial tcp 172.17.0.6:8080: connect: connection refused
Pod ecom-ui-64dd6b8cf-v7hw9: BackOff - Back-off restarting failed container

━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/ecom-ui

****** ecom-ui-64dd6b8cf-v7hw9 ******
------ ecom-ui ------Lifecycle scripts included in ecom-ui:
  start
    react-scripts start
  test
    react-scripts test

available via `npm run-script`:
  build
    react-scripts build
  eject
    react-scripts eject


Error Details:

serviceName: ecom-ui
status:
  state: unhealthy
  lastMessage: BackOff - Back-off restarting failed container
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment ecom-ui:\e[39m \e[37mScalingReplicaSet - Scaled up replica set ecom-ui-5757c78768 to 1\e[39m\n\e[94mDeployment ecom-ui:\e[39m \e[37mScalingReplicaSet - Scaled up replica set ecom-ui-64dd6b8cf to 1\e[39m\n\e[94mDeployment ecom-ui:\e[39m \e[37mScalingReplicaSet - Scaled down replica set ecom-ui-5757c78768 to 0\e[39m\n\e[94mPod ecom-ui-64dd6b8cf-v7hw9:\e[39m \e[37mScheduled - Successfully assigned ecom-default/ecom-ui-64dd6b8cf-v7hw9 to minikube\e[39m\n\e[94mPod ecom-ui-64dd6b8cf-v7hw9:\e[39m \e[37mPulled - Container image \"ecom-ui:v-a6f2d7aced\" already present on machine\e[39m\n\e[94mPod ecom-ui-64dd6b8cf-v7hw9:\e[39m \e[37mCreated - Created container ecom-ui\e[39m\n\e[94mPod ecom-ui-64dd6b8cf-v7hw9:\e[39m \e[37mStarted - Started container ecom-ui\e[39m\n\e[94mPod ecom-ui-64dd6b8cf-v7hw9:\e[39m \e[33mUnhealthy - Readiness probe failed: Get \"http://172.17.0.6:8080/\": dial tcp 172.17.0.6:8080: connect: connection refused\e[39m\n\e[94mPod ecom-ui-64dd6b8cf-v7hw9:\e[39m \e[33mBackOff - Back-off restarting failed container\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/ecom-ui\e[39m\n\e[94m\e[39m\n\e[94m****** ecom-ui-64dd6b8cf-v7hw9 ******\e[39m\n\e[94m\e[39m\e[90m------ ecom-ui ------\e[39mLifecycle scripts included in ecom-ui:\n  start\n    react-scripts start\n  test\n    react-scripts test\n\navailable via `npm run-script`:\n  build\n    react-scripts build\n  eject\n    react-scripts eject\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: ecom-ui
      namespace: ecom-default
      uid: 669b334d-e3b8-4ba9-9651-00f6dda9edb1
      resourceVersion: '8801'
      generation: 2
      creationTimestamp: '2021-01-26T03:21:04Z'
      labels:
        module: ecom-ui
        service: ecom-ui
      annotations:
        deployment.kubernetes.io/revision: '2'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: 79345e02098f49a6204815756025a0022a48f42ab49f68827b9db4a2b83cdecc
        garden.io/version: v-a6f2d7aced
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"79345e02098f49a6204815756025a0022a48f42ab49f68827b9db4a2b83cdecc","garden.io/version":"v-a6f2d7aced"},"labels":{"module":"ecom-ui","service":"ecom-ui"},"name":"ecom-ui","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"ecom-ui"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"ecom-ui","service":"ecom-ui"}},"spec":{"containers":[{"args":["npm","run"],"env":[{"name":"GARDEN_VERSION","value":"v-a6f2d7aced"},{"name":"GARDEN_MODULE_VERSION","value":"v-a6f2d7aced"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"ecom-ui\",\"name\":\"ecom-ui\",\"type\":\"build\",\"version\":\"v-a6f2d7aced\"},{\"moduleName\":\"ecom-api\",\"name\":\"ecom-api\",\"type\":\"service\",\"version\":\"v-0cf035c411\"}]"},{"name":"HOSTNAME","value":"ecom.local.app.garden"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"ecom-ui:v-a6f2d7aced","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/","port":8080,"scheme":"HTTP"},"initialDelaySeconds":90,"periodSeconds":5,"successThreshold":1,"timeoutSeconds":3},"name":"ecom-ui","ports":[{"containerPort":8080,"name":"http","protocol":"TCP"}],"readinessProbe":{"failureThreshold":90,"httpGet":{"path":"/","port":8080,"scheme":"HTTP"},"initialDelaySeconds":2,"periodSeconds":1,"successThreshold":2,"timeoutSeconds":3},"resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false}}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: ecom-ui
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: ecom-ui
            service: ecom-ui
        spec:
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 2
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:25:56.957Z]  Processing...

[2021-01-26T03:25:57.020Z] Waiting for code changes...

[2021-01-26T03:27:23.922Z] Getting status...

[2021-01-26T03:27:29.355Z] Getting status... → Cached

[2021-01-26T03:27:29.362Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:27:41.524Z]  Processing...

[2021-01-26T03:27:41.549Z] Syncing module sources (9 files)...

[2021-01-26T03:27:41.566Z] Syncing module sources (35840 files)...

[2021-01-26T03:27:41.758Z] Syncing module sources (5 files)...

[2021-01-26T03:27:42.192Z] Syncing module sources (5 files)... → Done (took 0.4 sec)

[2021-01-26T03:27:42.225Z] Getting build status for v-1d035bde45...

[2021-01-26T03:27:42.241Z] Getting build status for v-0acb088676...

[2021-01-26T03:27:42.277Z] Getting build status for v-0acb088676... → Done (took 0 sec)

[2021-01-26T03:27:42.412Z] Syncing module sources (9 files)... → Done (took 0.9 sec)

[2021-01-26T03:27:42.439Z] Getting build status for v-0cf035c411...

[2021-01-26T03:27:44.881Z] Getting build status for v-1d035bde45... → Done (took 2.7 sec)

[2021-01-26T03:27:44.946Z] Getting build status for v-0cf035c411... → Done (took 2.5 sec)

[2021-01-26T03:27:45.112Z] Deploying version v-0cf035c411...

[2021-01-26T03:27:45.126Z] Deploying version v-0cf035c411... → Already deployed

[2021-01-26T03:27:45.153Z] → Ingress: http://ecom.192.168.49.2.nip.io/graphql

[2021-01-26T03:27:45.225Z] → Forward: http://127.10.0.2:39943 → ecom-api:80 (http)

[2021-01-26T03:27:45.278Z] Deploying version v-1d035bde45...

[2021-01-26T03:27:45.290Z] Deploying version v-0acb088676...

[2021-01-26T03:27:46.899Z] Waiting for resources to be ready...

[2021-01-26T03:27:46.999Z] Waiting for resources to be ready...

[2021-01-26T03:27:48.947Z] Deploying version v-1d035bde45...

[2021-01-26T03:27:48.978Z] Error deploying ecom-backend: CrashLoopBackOff - back-off 2m40s restarting failed container=ecom-backend pod=ecom-backend-7d9fb5f45b-gj2sg_ecom-default(5852747d-d199-4fbc-9561-c28708f1371c)

━━━ Events ━━━
Deployment ecom-backend: ScalingReplicaSet - Scaled up replica set ecom-backend-7c75b7fd8d to 1
Deployment ecom-backend: ScalingReplicaSet - Scaled up replica set ecom-backend-7d9fb5f45b to 1
Deployment ecom-backend: ScalingReplicaSet - Scaled down replica set ecom-backend-7c75b7fd8d to 0
Pod ecom-backend-7d9fb5f45b-gj2sg: Scheduled - Successfully assigned ecom-default/ecom-backend-7d9fb5f45b-gj2sg to minikube
Pod ecom-backend-7d9fb5f45b-gj2sg: Pulled - Container image "ecom-backend:v-1d035bde45" already present on machine
Pod ecom-backend-7d9fb5f45b-gj2sg: Created - Created container ecom-backend
Pod ecom-backend-7d9fb5f45b-gj2sg: Started - Started container ecom-backend
Pod ecom-backend-7d9fb5f45b-gj2sg: BackOff - Back-off restarting failed container

━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/ecom-backend

****** ecom-backend-7d9fb5f45b-gj2sg ******
------ ecom-backend ------Go Backend Server


Error Details:

serviceName: ecom-backend
status:
  state: unhealthy
  lastMessage: >-
    CrashLoopBackOff - back-off 2m40s restarting failed container=ecom-backend
    pod=ecom-backend-7d9fb5f45b-gj2sg_ecom-default(5852747d-d199-4fbc-9561-c28708f1371c)
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment ecom-backend:\e[39m \e[37mScalingReplicaSet - Scaled up replica set ecom-backend-7c75b7fd8d to 1\e[39m\n\e[94mDeployment ecom-backend:\e[39m \e[37mScalingReplicaSet - Scaled up replica set ecom-backend-7d9fb5f45b to 1\e[39m\n\e[94mDeployment ecom-backend:\e[39m \e[37mScalingReplicaSet - Scaled down replica set ecom-backend-7c75b7fd8d to 0\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[37mScheduled - Successfully assigned ecom-default/ecom-backend-7d9fb5f45b-gj2sg to minikube\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[37mPulled - Container image \"ecom-backend:v-1d035bde45\" already present on machine\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[37mCreated - Created container ecom-backend\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[37mStarted - Started container ecom-backend\e[39m\n\e[94mPod ecom-backend-7d9fb5f45b-gj2sg:\e[39m \e[33mBackOff - Back-off restarting failed container\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/ecom-backend\e[39m\n\e[94m\e[39m\n\e[94m****** ecom-backend-7d9fb5f45b-gj2sg ******\e[39m\n\e[94m\e[39m\e[90m------ ecom-backend ------\e[39mGo Backend Server\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: ecom-backend
      namespace: ecom-default
      uid: 6099f5ed-c7b7-4ff1-9e48-4f2afd3dd6a8
      resourceVersion: '8643'
      generation: 2
      creationTimestamp: '2021-01-26T03:10:57Z'
      labels:
        module: ecom-backend
        service: ecom-backend
      annotations:
        deployment.kubernetes.io/revision: '2'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: a97e26f029a06580560d0e9ac0baa713c3fe583d754dda4cd911cf4c00b6364e
        garden.io/version: v-1d035bde45
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"a97e26f029a06580560d0e9ac0baa713c3fe583d754dda4cd911cf4c00b6364e","garden.io/version":"v-1d035bde45"},"labels":{"module":"ecom-backend","service":"ecom-backend"},"name":"ecom-backend","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"ecom-backend"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"ecom-backend","service":"ecom-backend"}},"spec":{"containers":[{"env":[{"name":"GARDEN_VERSION","value":"v-1d035bde45"},{"name":"GARDEN_MODULE_VERSION","value":"v-1d035bde45"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"ecom-backend\",\"name\":\"ecom-backend\",\"type\":\"build\",\"version\":\"v-1d035bde45\"}]"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"ecom-backend:v-1d035bde45","imagePullPolicy":"IfNotPresent","name":"ecom-backend","resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false}}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: ecom-backend
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: ecom-backend
            service: ecom-backend
        spec:
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 2
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:27:49.091Z] Deploying version v-0acb088676...

[2021-01-26T03:27:49.129Z] Error deploying db: ProgressDeadlineExceeded - ReplicaSet "db-84f8b4cdc5" has timed out progressing.

━━━ Events ━━━
Deployment db: ScalingReplicaSet - Scaled up replica set db-84f8b4cdc5 to 1
Pod db-84f8b4cdc5-cggc5: Scheduled - Successfully assigned ecom-default/db-84f8b4cdc5-cggc5 to minikube
Pod db-84f8b4cdc5-cggc5: Pulled - Container image "postgres:12-alpine" already present on machine
Pod db-84f8b4cdc5-cggc5: Created - Created container db
Pod db-84f8b4cdc5-cggc5: Started - Started container db
Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: FATAL:  the database system is starting up

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: FATAL:  role "ecomuser" does not exist


━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/db

****** db-84f8b4cdc5-cggc5 ******
------ db ------2021-01-26 03:27:22.302 UTC [655] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:23.297 UTC [662] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:24.299 UTC [669] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:25.320 UTC [677] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:26.388 UTC [685] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:27.346 UTC [693] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:28.345 UTC [701] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:29.317 UTC [708] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:30.307 UTC [716] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:31.320 UTC [723] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:32.301 UTC [730] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:33.299 UTC [737] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:33.744 UTC [744] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:34.300 UTC [752] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:35.303 UTC [759] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:36.311 UTC [766] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:37.301 UTC [774] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:38.298 UTC [781] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:38.730 UTC [789] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:39.312 UTC [797] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:40.308 UTC [804] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:41.314 UTC [811] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:42.332 UTC [819] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:43.311 UTC [826] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:43.721 UTC [834] FATAL:  role "ecomuser" does not exist
2021-01-26 03:27:43.774 UTC [1] LOG:  received fast shutdown request
2021-01-26 03:27:43.797 UTC [1] LOG:  aborting any active transactions
2021-01-26 03:27:43.798 UTC [1] LOG:  background worker "logical replication launcher" (PID 59) exited with exit code 1
2021-01-26 03:27:43.798 UTC [54] LOG:  shutting down
2021-01-26 03:27:43.947 UTC [1] LOG:  database system is shut down


Error Details:

serviceName: db
status:
  state: unhealthy
  lastMessage: >-
    ProgressDeadlineExceeded - ReplicaSet "db-84f8b4cdc5" has timed out
    progressing.
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment db:\e[39m \e[37mScalingReplicaSet - Scaled up replica set db-84f8b4cdc5 to 1\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mScheduled - Successfully assigned ecom-default/db-84f8b4cdc5-cggc5 to minikube\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mPulled - Container image \"postgres:12-alpine\" already present on machine\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mCreated - Created container db\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mStarted - Started container db\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: could not connect to server: No such file or directory\e[39m\n\e[33m\tIs the server running locally and accepting\e[39m\n\e[33m\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: FATAL:  the database system is starting up\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: server closed the connection unexpectedly\e[39m\n\e[33m\tThis probably means the server terminated abnormally\e[39m\n\e[33m\tbefore or while processing the request.\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: FATAL:  role \"ecomuser\" does not exist\e[39m\n\e[33m\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/db\e[39m\n\e[94m\e[39m\n\e[94m****** db-84f8b4cdc5-cggc5 ******\e[39m\n\e[94m\e[39m\e[90m------ db ------\e[39m2021-01-26 03:27:22.302 UTC [655] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:23.297 UTC [662] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:24.299 UTC [669] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:25.320 UTC [677] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:26.388 UTC [685] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:27.346 UTC [693] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:28.345 UTC [701] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:29.317 UTC [708] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:30.307 UTC [716] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:31.320 UTC [723] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:32.301 UTC [730] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:33.299 UTC [737] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:33.744 UTC [744] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:34.300 UTC [752] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:35.303 UTC [759] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:36.311 UTC [766] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:37.301 UTC [774] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:38.298 UTC [781] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:38.730 UTC [789] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:39.312 UTC [797] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:40.308 UTC [804] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:41.314 UTC [811] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:42.332 UTC [819] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:43.311 UTC [826] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:43.721 UTC [834] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:27:43.774 UTC [1] LOG:  received fast shutdown request\n2021-01-26 03:27:43.797 UTC [1] LOG:  aborting any active transactions\n2021-01-26 03:27:43.798 UTC [1] LOG:  background worker \"logical replication launcher\" (PID 59) exited with exit code 1\n2021-01-26 03:27:43.798 UTC [54] LOG:  shutting down\n2021-01-26 03:27:43.947 UTC [1] LOG:  database system is shut down\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: db
      namespace: ecom-default
      uid: afa2efda-ffde-419a-9b15-3f26e90fa0fa
      resourceVersion: '8394'
      generation: 1
      creationTimestamp: '2021-01-26T03:10:55Z'
      labels:
        module: postgres
        service: db
      annotations:
        deployment.kubernetes.io/revision: '1'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: e22314585a01f53729003b0490f5f8ebb049fe0fa7bb06f7328d021a6de6cb03
        garden.io/version: v-0acb088676
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"e22314585a01f53729003b0490f5f8ebb049fe0fa7bb06f7328d021a6de6cb03","garden.io/version":"v-0acb088676"},"labels":{"module":"postgres","service":"db"},"name":"db","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"db"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"postgres","service":"db"}},"spec":{"containers":[{"env":[{"name":"GARDEN_VERSION","value":"v-0acb088676"},{"name":"GARDEN_MODULE_VERSION","value":"v-0acb088676"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"postgres\",\"name\":\"postgres\",\"type\":\"build\",\"version\":\"v-0acb088676\"}]"},{"name":"POSTGRES_DATABASE","value":"ecom"},{"name":"POSTGRES_USERNAME","value":"ecomuser"},{"name":"POSTGRES_PASSWORD","value":"ecompass"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"postgres:12-alpine","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["psql","-w","-U","ecomuser","-d","ecom","-c","SELECT
          1"]},"failureThreshold":3,"initialDelaySeconds":90,"periodSeconds":5,"successThreshold":1,"timeoutSeconds":3},"name":"db","ports":[{"containerPort":5432,"name":"db","protocol":"TCP"}],"readinessProbe":{"exec":{"command":["psql","-w","-U","ecomuser","-d","ecom","-c","SELECT
          1"]},"failureThreshold":90,"initialDelaySeconds":2,"periodSeconds":1,"successThreshold":2,"timeoutSeconds":3},"resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false},"volumeMounts":[{"mountPath":"/db-data","name":"data"}]}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5,"volumes":[{"emptyDir":{},"name":"data"}]}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: db
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: postgres
            service: db
        spec:
          volumes: []
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 1
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:27:50.401Z] Syncing module sources (35840 files)... → Done (took 8.8 sec)

[2021-01-26T03:27:50.423Z] Getting build status for v-671e752031...

[2021-01-26T03:27:50.525Z] Building version v-671e752031...

[2021-01-26T03:27:50.749Z] Building ecom-ui:v-671e752031...

[2021-01-26T03:28:02.213Z] Building ecom-ui:v-671e752031... → Done (took 11.8 sec)

[2021-01-26T03:28:02.235Z] Deploying version v-671e752031...

[2021-01-26T03:28:05.554Z] Waiting for resources to be ready...

[2021-01-26T03:28:07.724Z] Deployment/ecom-ui: Started container ecom-ui

[2021-01-26T03:28:10.303Z] Deployment/ecom-ui: Readiness probe failed: Get "http://172.17.0.8:8080/": dial tcp 172.17.0.8:8080: connect: connection refused

[2021-01-26T03:31:25.650Z] Getting status...

[2021-01-26T03:31:28.007Z] Getting status... → Cached

[2021-01-26T03:31:28.016Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:31:34.295Z] Unknown dependencies detected.

  Service 'ecom-backend' (in module 'ecom-backend'): Unknown service or task 'postgres' referenced in dependencies.


Error Details:

unknownDependencies: []
availableModules: []
availableServicesAndTasks: []


[2021-01-26T03:31:34.308Z] 
See error.log for detailed error message

[2021-01-26T03:32:33.865Z] Getting status...

[2021-01-26T03:32:35.908Z] Getting status... → Cached

[2021-01-26T03:32:35.923Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:32:48.657Z]  Processing...

[2021-01-26T03:32:48.687Z] Syncing module sources (5 files)...

[2021-01-26T03:32:48.696Z] Syncing module sources (9 files)...

[2021-01-26T03:32:48.705Z] Syncing module sources (35840 files)...

[2021-01-26T03:32:49.263Z] Getting build status for v-0acb088676...

[2021-01-26T03:32:49.289Z] Getting build status for v-0acb088676... → Done (took 0 sec)

[2021-01-26T03:32:49.313Z] Syncing module sources (5 files)... → Done (took 0.6 sec)

[2021-01-26T03:32:49.334Z] Getting build status for v-9353edaa4c...

[2021-01-26T03:32:49.367Z] Syncing module sources (9 files)... → Done (took 0.6 sec)

[2021-01-26T03:32:49.385Z] Getting build status for v-d19306e250...

[2021-01-26T03:32:49.593Z] Building version v-9353edaa4c...

[2021-01-26T03:32:49.776Z] Building version v-d19306e250...

[2021-01-26T03:32:49.967Z] Building ecom-backend:v-9353edaa4c...

[2021-01-26T03:32:50.089Z] Deploying version v-0acb088676...

[2021-01-26T03:32:50.126Z] Building ecom-api:v-d19306e250...

[2021-01-26T03:32:52.794Z] Building ecom-backend:v-9353edaa4c... → Done (took 3.5 sec)

[2021-01-26T03:32:52.804Z] Building ecom-api:v-d19306e250... → Done (took 3.4 sec)

[2021-01-26T03:32:54.320Z] Waiting for resources to be ready...

[2021-01-26T03:32:56.373Z] Deploying version v-0acb088676...

[2021-01-26T03:32:56.414Z] Error deploying db: ProgressDeadlineExceeded - ReplicaSet "db-84f8b4cdc5" has timed out progressing.

━━━ Events ━━━
Deployment db: ScalingReplicaSet - Scaled up replica set db-84f8b4cdc5 to 1
Pod db-84f8b4cdc5-cggc5: Scheduled - Successfully assigned ecom-default/db-84f8b4cdc5-cggc5 to minikube
Pod db-84f8b4cdc5-cggc5: Pulled - Container image "postgres:12-alpine" already present on machine
Pod db-84f8b4cdc5-cggc5: Created - Created container db
Pod db-84f8b4cdc5-cggc5: Started - Started container db
Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: FATAL:  the database system is starting up

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

Pod db-84f8b4cdc5-cggc5: Unhealthy - Readiness probe failed: psql: error: FATAL:  role "ecomuser" does not exist

Pod db-84f8b4cdc5-cggc5: BackOff - Back-off restarting failed container

━━━ Pod logs ━━━
<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>
$ kubectl -n ecom-default --context=minikube logs deployment/db

****** db-84f8b4cdc5-cggc5 ******
------ db ------2021-01-26 03:32:48.985 UTC [35] LOG:  database system is ready to accept connections
 done
server started

/usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*

waiting for server to shut down....2021-01-26 03:32:49.021 UTC [35] LOG:  received fast shutdown request
2021-01-26 03:32:49.041 UTC [35] LOG:  aborting any active transactions
2021-01-26 03:32:49.041 UTC [35] LOG:  background worker "logical replication launcher" (PID 42) exited with exit code 1
2021-01-26 03:32:49.042 UTC [37] LOG:  shutting down
2021-01-26 03:32:49.190 UTC [35] LOG:  database system is shut down
 done
server stopped

PostgreSQL init process complete; ready for start up.

2021-01-26 03:32:49.255 UTC [1] LOG:  starting PostgreSQL 12.5 on x86_64-pc-linux-musl, compiled by gcc (Alpine 10.2.1_pre1) 10.2.1 20201203, 64-bit
2021-01-26 03:32:49.255 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
2021-01-26 03:32:49.255 UTC [1] LOG:  listening on IPv6 address "::", port 5432
2021-01-26 03:32:49.300 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
2021-01-26 03:32:49.380 UTC [53] LOG:  database system was shut down at 2021-01-26 03:32:49 UTC
2021-01-26 03:32:49.399 UTC [54] FATAL:  the database system is starting up
2021-01-26 03:32:49.427 UTC [1] LOG:  database system is ready to accept connections
2021-01-26 03:32:50.324 UTC [68] FATAL:  role "ecomuser" does not exist
2021-01-26 03:32:51.313 UTC [75] FATAL:  role "ecomuser" does not exist
2021-01-26 03:32:52.307 UTC [82] FATAL:  role "ecomuser" does not exist
2021-01-26 03:32:53.304 UTC [89] FATAL:  role "ecomuser" does not exist
2021-01-26 03:32:54.305 UTC [96] FATAL:  role "ecomuser" does not exist
2021-01-26 03:32:55.310 UTC [104] FATAL:  role "ecomuser" does not exist
2021-01-26 03:32:56.306 UTC [111] FATAL:  role "ecomuser" does not exist


Error Details:

serviceName: db
status:
  state: unhealthy
  lastMessage: >-
    ProgressDeadlineExceeded - ReplicaSet "db-84f8b4cdc5" has timed out
    progressing.
  logs: "\e[37m━━━ Events ━━━\e[39m\n\e[94mDeployment db:\e[39m \e[37mScalingReplicaSet - Scaled up replica set db-84f8b4cdc5 to 1\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mScheduled - Successfully assigned ecom-default/db-84f8b4cdc5-cggc5 to minikube\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mPulled - Container image \"postgres:12-alpine\" already present on machine\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mCreated - Created container db\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[37mStarted - Started container db\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: could not connect to server: No such file or directory\e[39m\n\e[33m\tIs the server running locally and accepting\e[39m\n\e[33m\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: FATAL:  the database system is starting up\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: server closed the connection unexpectedly\e[39m\n\e[33m\tThis probably means the server terminated abnormally\e[39m\n\e[33m\tbefore or while processing the request.\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mUnhealthy - Readiness probe failed: psql: error: FATAL:  role \"ecomuser\" does not exist\e[39m\n\e[33m\e[39m\n\e[94mPod db-84f8b4cdc5-cggc5:\e[39m \e[33mBackOff - Back-off restarting failed container\e[39m\e[37m\e[39m\n\e[37m\e[39m\n\e[37m━━━ Pod logs ━━━\e[39m\n\e[37m\e[39m\e[90m<Showing last 30 lines per pod in this Deployment. Run the following command for complete logs>\e[39m\n\e[90m$ kubectl -n ecom-default --context=minikube logs deployment/db\e[39m\n\e[94m\e[39m\n\e[94m****** db-84f8b4cdc5-cggc5 ******\e[39m\n\e[94m\e[39m\e[90m------ db ------\e[39m2021-01-26 03:32:48.985 UTC [35] LOG:  database system is ready to accept connections\n done\nserver started\n\n/usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*\n\nwaiting for server to shut down....2021-01-26 03:32:49.021 UTC [35] LOG:  received fast shutdown request\n2021-01-26 03:32:49.041 UTC [35] LOG:  aborting any active transactions\n2021-01-26 03:32:49.041 UTC [35] LOG:  background worker \"logical replication launcher\" (PID 42) exited with exit code 1\n2021-01-26 03:32:49.042 UTC [37] LOG:  shutting down\n2021-01-26 03:32:49.190 UTC [35] LOG:  database system is shut down\n done\nserver stopped\n\nPostgreSQL init process complete; ready for start up.\n\n2021-01-26 03:32:49.255 UTC [1] LOG:  starting PostgreSQL 12.5 on x86_64-pc-linux-musl, compiled by gcc (Alpine 10.2.1_pre1) 10.2.1 20201203, 64-bit\n2021-01-26 03:32:49.255 UTC [1] LOG:  listening on IPv4 address \"0.0.0.0\", port 5432\n2021-01-26 03:32:49.255 UTC [1] LOG:  listening on IPv6 address \"::\", port 5432\n2021-01-26 03:32:49.300 UTC [1] LOG:  listening on Unix socket \"/var/run/postgresql/.s.PGSQL.5432\"\n2021-01-26 03:32:49.380 UTC [53] LOG:  database system was shut down at 2021-01-26 03:32:49 UTC\n2021-01-26 03:32:49.399 UTC [54] FATAL:  the database system is starting up\n2021-01-26 03:32:49.427 UTC [1] LOG:  database system is ready to accept connections\n2021-01-26 03:32:50.324 UTC [68] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:32:51.313 UTC [75] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:32:52.307 UTC [82] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:32:53.304 UTC [89] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:32:54.305 UTC [96] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:32:55.310 UTC [104] FATAL:  role \"ecomuser\" does not exist\n2021-01-26 03:32:56.306 UTC [111] FATAL:  role \"ecomuser\" does not exist\n"
  resource:
    kind: Deployment
    apiVersion: apps/v1
    metadata:
      name: db
      namespace: ecom-default
      uid: afa2efda-ffde-419a-9b15-3f26e90fa0fa
      resourceVersion: '8394'
      generation: 1
      creationTimestamp: '2021-01-26T03:10:55Z'
      labels:
        module: postgres
        service: db
      annotations:
        deployment.kubernetes.io/revision: '1'
        garden.io/configured.replicas: '1'
        garden.io/generated: 'true'
        garden.io/manifest-hash: e22314585a01f53729003b0490f5f8ebb049fe0fa7bb06f7328d021a6de6cb03
        garden.io/version: v-0acb088676
        kubectl.kubernetes.io/last-applied-configuration: >
          {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"garden.io/configured.replicas":"1","garden.io/generated":"true","garden.io/manifest-hash":"e22314585a01f53729003b0490f5f8ebb049fe0fa7bb06f7328d021a6de6cb03","garden.io/version":"v-0acb088676"},"labels":{"module":"postgres","service":"db"},"name":"db","namespace":"ecom-default"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"matchLabels":{"service":"db"}},"strategy":{"rollingUpdate":{"maxSurge":1,"maxUnavailable":1},"type":"RollingUpdate"},"template":{"metadata":{"labels":{"module":"postgres","service":"db"}},"spec":{"containers":[{"env":[{"name":"GARDEN_VERSION","value":"v-0acb088676"},{"name":"GARDEN_MODULE_VERSION","value":"v-0acb088676"},{"name":"GARDEN_VARIABLES_POSTGRES_DATABASE","value":"ecom"},{"name":"GARDEN_VARIABLES_POSTGRES_USERNAME","value":"ecomuser"},{"name":"GARDEN_VARIABLES_POSTGRES_PASSWORD","value":"ecompass"},{"name":"GARDEN_VARIABLES_BASEHOSTNAME","value":"ecom.local.app.garden"},{"name":"GARDEN_DEPENDENCIES","value":"[{\"moduleName\":\"postgres\",\"name\":\"postgres\",\"type\":\"build\",\"version\":\"v-0acb088676\"}]"},{"name":"POSTGRES_DATABASE","value":"ecom"},{"name":"POSTGRES_USERNAME","value":"ecomuser"},{"name":"POSTGRES_PASSWORD","value":"ecompass"},{"name":"POD_HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"POD_IP","valueFrom":{"fieldRef":{"fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"POD_NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_SERVICE_ACCOUNT","valueFrom":{"fieldRef":{"fieldPath":"spec.serviceAccountName"}}},{"name":"POD_UID","valueFrom":{"fieldRef":{"fieldPath":"metadata.uid"}}}],"image":"postgres:12-alpine","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["psql","-w","-U","ecomuser","-d","ecom","-c","SELECT
          1"]},"failureThreshold":3,"initialDelaySeconds":90,"periodSeconds":5,"successThreshold":1,"timeoutSeconds":3},"name":"db","ports":[{"containerPort":5432,"name":"db","protocol":"TCP"}],"readinessProbe":{"exec":{"command":["psql","-w","-U","ecomuser","-d","ecom","-c","SELECT
          1"]},"failureThreshold":90,"initialDelaySeconds":2,"periodSeconds":1,"successThreshold":2,"timeoutSeconds":3},"resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"10m","memory":"64Mi"}},"securityContext":{"allowPrivilegeEscalation":false},"volumeMounts":[{"mountPath":"/db-data","name":"data"}]}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","terminationGracePeriodSeconds":5,"volumes":[{"emptyDir":{},"name":"data"}]}}}}
      managedFields: []
    spec:
      replicas: 1
      selector:
        matchLabels:
          service: db
      template:
        metadata:
          creationTimestamp: null
          labels:
            module: postgres
            service: db
        spec:
          volumes: []
          containers: []
          restartPolicy: Always
          terminationGracePeriodSeconds: 5
          dnsPolicy: ClusterFirst
          securityContext: {}
          schedulerName: default-scheduler
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxUnavailable: 1
          maxSurge: 1
      revisionHistoryLimit: 3
      progressDeadlineSeconds: 600
    status:
      observedGeneration: 1
      replicas: 1
      updatedReplicas: 1
      unavailableReplicas: 1
      conditions: []


[2021-01-26T03:32:57.455Z] Syncing module sources (35840 files)... → Done (took 8.7 sec)

[2021-01-26T03:32:57.476Z] Getting build status for v-671e752031...

[2021-01-26T03:32:57.648Z] Getting build status for v-671e752031... → Done (took 0.2 sec)

[2021-01-26T03:32:57.670Z]  Processing...

[2021-01-26T03:32:57.741Z] Waiting for code changes...

[2021-01-26T03:33:18.474Z]  Processing...

[2021-01-26T03:33:20.891Z] Waiting for code changes...

[2021-01-26T03:37:19.993Z]  Processing...

[2021-01-26T03:37:22.095Z] Waiting for code changes...

[2021-01-26T03:38:24.529Z] Getting status...

[2021-01-26T03:38:26.580Z] Getting status...

[2021-01-26T03:38:28.782Z] Getting status... → Cached

[2021-01-26T03:38:28.801Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:38:28.995Z] Getting status... → Cached

[2021-01-26T03:38:29.016Z] Run with --force-refresh to force a refresh of provider statuses.

[2021-01-26T03:39:16.304Z] Large number of files (35841) found in module ecom-ui. You may need to configure file exclusions.
See https://docs.garden.io/using-garden/configuration-overview#including-excluding-files-and-directories for details.
Run garden util hide-warning ecom-filecount-ecom-ui to disable this warning.

[2021-01-26T03:39:16.442Z] Module configuration changed, reloading...

[2021-01-26T03:39:16.909Z] Large number of files (35841) found in module ecom-ui. You may need to configure file exclusions.
See https://docs.garden.io/using-garden/configuration-overview#including-excluding-files-and-directories for details.
Run garden util hide-warning ecom-filecount-ecom-ui to disable this warning.

[2021-01-26T03:39:17.240Z] Module configuration changed, reloading...

[2021-01-26T03:39:17.293Z] Garden dashboard running at http://localhost:9777

[2021-01-26T03:39:17.316Z] Getting status...

[2021-01-26T03:39:29.995Z] Getting status... → Cached

[2021-01-26T03:39:30.020Z] Run with --force-refresh to force a refresh of provider statuses.
